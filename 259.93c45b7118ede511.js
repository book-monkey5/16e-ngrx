"use strict";(self.webpackChunkbook_monkey=self.webpackChunkbook_monkey||[]).push([[259],{259:(tt,p,c)=>{c.r(p),c.d(p,{BooksModule:()=>W});var a=c(6814),r=c(4221),f=c(7483),l=c(5961),t=c(5879),g=c(5008);let v=(()=>{class o{constructor(){this.confirm=new t.vpe}onClick(){window.confirm(this.confirmText)&&this.confirm.emit()}static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275dir=t.lG2({type:o,selectors:[["","bmConfirm",""]],hostBindings:function(n,s){1&n&&t.NdJ("click",function(){return s.onClick()})},inputs:{confirmText:["bmConfirm","confirmText"]},outputs:{confirm:"confirm"}})}return o})();var Z=c(8645),B=c(9773),x=c(9346);let T=(()=>{class o{constructor(i,n,s){this.template=i,this.viewContainer=n,this.authService=s,this.destroy$=new Z.x,this.authService.isAuthenticated$.pipe((0,B.R)(this.destroy$)).subscribe(u=>{u?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}ngOnDestroy(){this.destroy$.next()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.Rgc),t.Y36(t.s_b),t.Y36(x.e))};static#o=this.\u0275dir=t.lG2({type:o,selectors:[["","bmLoggedinOnly",""]]})}return o})(),d=(()=>{class o{transform(i){return i?`${i.substring(0,3)}-${i.substring(3)}`:""}static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275pipe=t.Yjl({name:"isbn",type:o,pure:!0})}return o})();function C(o,e){if(1&o&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&o){const i=t.oxw().ngIf;t.xp6(1),t.Oqu(i.subtitle)}}function A(o,e){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.xp6(1),t.Oqu(i)}}function L(o,e){if(1&o&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Published"),t.qZA(),t._uU(3),t.ALo(4,"date"),t.qZA()),2&o){const i=t.oxw().ngIf;t.xp6(3),t.hij(" ",t.xi3(4,1,i.published,"longDate")," ")}}function y(o,e){if(1&o&&t._UZ(0,"img",10),2&o){const i=t.oxw().ngIf;t.Q6J("src",i.thumbnailUrl,t.LSH)}}const I=function(o){return["/admin/edit",o]};function U(o,e){if(1&o){const i=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t.NdJ("confirm",function(){t.CHM(i);const s=t.oxw().ngIf,u=t.oxw();return t.KtG(u.removeBook(s.isbn))}),t._uU(2," Remove book "),t.qZA(),t.TgZ(3,"a",12),t._uU(4," Edit book "),t.qZA(),t.BQk()}if(2&o){const i=t.oxw().ngIf;t.xp6(3),t.Q6J("routerLink",t.VKq(1,I,i.isbn))}}function F(o,e){if(1&o&&(t.TgZ(0,"div",1)(1,"h1"),t._uU(2),t.qZA(),t.YNc(3,C,2,1,"p",2),t.TgZ(4,"div",3)(5,"div")(6,"h2"),t._uU(7,"Authors"),t.qZA(),t.TgZ(8,"ul"),t.YNc(9,A,2,1,"li",4),t.qZA()(),t.TgZ(10,"div")(11,"h2"),t._uU(12,"ISBN"),t.qZA(),t._uU(13),t.ALo(14,"isbn"),t.qZA(),t.YNc(15,L,5,4,"div",5),t.qZA(),t.TgZ(16,"h2"),t._uU(17,"Description"),t.qZA(),t.TgZ(18,"p"),t._uU(19),t.qZA(),t.YNc(20,y,1,1,"img",6),t.TgZ(21,"a",7),t._uU(22,"Back to list"),t.qZA(),t.YNc(23,U,5,3,"ng-container",8),t.qZA()),2&o){const i=e.ngIf;t.xp6(2),t.Oqu(i.title),t.xp6(1),t.Q6J("ngIf",i.subtitle),t.xp6(6),t.Q6J("ngForOf",i.authors),t.xp6(4),t.hij(" ",t.lcZ(14,7,i.isbn)," "),t.xp6(2),t.Q6J("ngIf",i.published),t.xp6(4),t.Oqu(i.description),t.xp6(1),t.Q6J("ngIf",i.thumbnailUrl)}}let Y=(()=>{class o{constructor(i,n,s){this.service=i,this.route=n,this.router=s;const u=this.route.snapshot.paramMap.get("isbn");this.book$=this.service.getSingle(u)}removeBook(i){this.service.remove(i).subscribe(()=>{this.router.navigateByUrl("/books")})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(g.T),t.Y36(l.gz),t.Y36(l.F0))};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["bm-book-details"]],decls:2,vars:3,consts:[["class","details",4,"ngIf"],[1,"details"],["role","doc-subtitle",4,"ngIf"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],["alt","Cover",3,"src",4,"ngIf"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["role","doc-subtitle"],["alt","Cover",3,"src"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(n,s){1&n&&(t.YNc(0,F,24,9,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,s.book$))},dependencies:[a.sg,a.O5,l.rH,v,T,a.Ov,a.uU,d]})}return o})();const m=(0,r.PH)("[Book] Load Books"),h=(0,r.PH)("[Book] Load Books Success",(0,r.Ky)()),k=(0,r.PH)("[Book] Load Books Failure",(0,r.Ky)()),b="book",O=(0,r.Lq)({books:[],loading:!1},(0,r.on)(m,o=>({...o,loading:!0})),(0,r.on)(h,(o,e)=>({...o,books:e.data,loading:!1})),(0,r.on)(k,(o,e)=>({...o,loading:!1}))),_=(0,r.ZF)(b),Q=(0,r.P1)(_,o=>o.loading),q=(0,r.P1)(_,o=>o.books);function N(o,e){if(1&o&&t._UZ(0,"img",6),2&o){const i=t.oxw(2);t.Q6J("src",i.book.thumbnailUrl,t.LSH)}}function w(o,e){if(1&o&&(t.TgZ(0,"p",7),t._uU(1),t.qZA()),2&o){const i=t.oxw(2);t.xp6(1),t.hij(" ",i.book.subtitle," ")}}function $(o,e){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.xp6(1),t.hij(" ",i," ")}}function D(o,e){if(1&o&&(t.TgZ(0,"a",1),t.YNc(1,N,1,1,"img",2),t.TgZ(2,"h2"),t._uU(3),t.qZA(),t.YNc(4,w,2,1,"p",3),t.TgZ(5,"ul",4),t.YNc(6,$,2,1,"li",5),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"isbn"),t.qZA()()),2&o){const i=t.oxw();t.Q6J("routerLink",i.book.isbn),t.xp6(1),t.Q6J("ngIf",i.book.thumbnailUrl),t.xp6(2),t.Oqu(i.book.title),t.xp6(1),t.Q6J("ngIf",i.book.subtitle),t.xp6(2),t.Q6J("ngForOf",i.book.authors),t.xp6(2),t.hij("ISBN ",t.lcZ(9,6,i.book.isbn),"")}}let S=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[["class","list-item",3,"routerLink",4,"ngIf"],[1,"list-item",3,"routerLink"],["alt","Cover",3,"src",4,"ngIf"],["role","doc-subtitle",4,"ngIf"],[1,"comma-list"],[4,"ngFor","ngForOf"],["alt","Cover",3,"src"],["role","doc-subtitle"]],template:function(n,s){1&n&&t.YNc(0,D,10,8,"a",0),2&n&&t.Q6J("ngIf",s.book)},dependencies:[a.sg,a.O5,l.rH,d]})}return o})();function H(o,e){if(1&o&&(t.TgZ(0,"li"),t._UZ(1,"bm-book-list-item",5),t.qZA()),2&o){const i=e.$implicit;t.xp6(1),t.Q6J("book",i)}}function j(o,e){1&o&&(t.TgZ(0,"li"),t._uU(1," No books available. "),t.qZA())}function P(o,e){if(1&o&&(t.TgZ(0,"ul",2),t.YNc(1,H,2,1,"li",3),t.YNc(2,j,2,0,"li",4),t.qZA()),2&o){const i=e.ngIf;t.xp6(1),t.Q6J("ngForOf",i),t.xp6(1),t.Q6J("ngIf",!i.length)}}function G(o,e){1&o&&(t.TgZ(0,"div",6),t._uU(1,"Loading ..."),t.qZA())}const K=[{path:"",component:(()=>{class o{constructor(i){this.store=i,this.books$=this.store.select(q),this.loading$=this.store.select(Q),this.store.dispatch(m())}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(r.yh))};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["bm-book-list"]],decls:6,vars:6,consts:[["class","book-list",4,"ngIf"],["class","loader",4,"ngIf"],[1,"book-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"book"],[1,"loader"]],template:function(n,s){1&n&&(t.TgZ(0,"h1"),t._uU(1,"Books"),t.qZA(),t.YNc(2,P,3,2,"ul",0),t.ALo(3,"async"),t.YNc(4,G,2,0,"div",1),t.ALo(5,"async")),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,2,s.books$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(5,4,s.loading$)))},dependencies:[a.sg,a.O5,S,a.Ov]})}return o})()},{path:":isbn",component:Y}];let M=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(K),l.Bz]})}return o})();var z=c(4664),R=c(7398),E=c(6306),X=c(2096);let V=(()=>{class o{constructor(i,n){this.actions$=i,this.service=n,this.loadBooks$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(m),(0,z.w)(()=>this.service.getAll().pipe((0,R.U)(s=>h({data:s})),(0,E.K)(s=>(0,X.of)(k({error:s.message})))))))}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(f.eX),t.LFG(g.T))};static#o=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac})}return o})(),W=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[a.ez,M,r.Aw.forFeature(b,O),f.sQ.forFeature([V])]})}return o})()}}]);