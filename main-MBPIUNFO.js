import{a as Se,d as yt,e as ot,f as ve,g as Ie,h as Ae,i as bt,j as xe,k as ye,o as be,u as Ee,v as F}from"./chunk-XWR63BBJ.js";import{$a as Et,Aa as re,Ba as se,C as Xt,D as qt,E as Jt,Ea as ce,F as U,Fa as ae,G as tt,Ga as ue,H as At,I as Yt,Ja as pe,L as R,M as j,N as V,Na as le,O as x,Oa as it,P as G,Pa as me,R as D,S as L,Sa as fe,Ta as de,Ua as he,V as Qt,Va as ge,Xa as Ce,Y as Z,Ya as Te,Z as W,Za as P,_ as te,_a as Oe,a as H,ab as ke,b as z,ba as ee,c as St,ca as ne,d as $t,f as Bt,fa as O,g as Ht,ga as et,h as zt,i as Ut,k as vt,l as Vt,m as M,ma as K,oa as _,p as It,pa as ie,q as w,qa as v,r as Gt,ra as I,s as Zt,sa as nt,t as Q,u as Wt,va as X,wa as q,x as Kt,xa as xt,ya as oe,za as y}from"./chunk-F7XNPLVO.js";var Y="PERFORM_ACTION",en="REFRESH",je="RESET",De="ROLLBACK",Le="COMMIT",Pe="SWEEP",Fe="TOGGLE_ACTION",nn="SET_ACTIONS_ACTIVE",$e="JUMP_TO_STATE",Be="JUMP_TO_ACTION",Pt="IMPORT_STATE",He="LOCK_CHANGES",ze="PAUSE_RECORDING",$=class{constructor(e,o){if(this.action=e,this.timestamp=o,this.type=Y,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Ct=class{constructor(){this.type=en}},Tt=class{constructor(e){this.timestamp=e,this.type=je}},Ot=class{constructor(e){this.timestamp=e,this.type=De}},kt=class{constructor(e){this.timestamp=e,this.type=Le}},wt=class{constructor(){this.type=Pe}},_t=class{constructor(e){this.id=e,this.type=Fe}};var Mt=class{constructor(e){this.index=e,this.type=$e}},Nt=class{constructor(e){this.actionId=e,this.type=Be}},Rt=class{constructor(e){this.nextLiftedState=e,this.type=Pt}},jt=class{constructor(e){this.status=e,this.type=He}},Dt=class{constructor(e){this.status=e,this.type=ze}};var at=new V("@ngrx/store-devtools Options"),we=new V("@ngrx/store-devtools Initial Config");function Ue(){return null}var on="NgRx Store DevTools";function rn(t){let e={maxAge:!1,monitor:Ue,actionSanitizer:void 0,stateSanitizer:void 0,name:on,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},o=typeof t=="function"?t():t,n=o.logOnly?{pause:!0,export:!0,test:!0}:!1,i=o.features||n||e.features;i.import===!0&&(i.import="custom");let s=Object.assign({},e,{features:i},o);if(s.maxAge&&s.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${s.maxAge}`);return s}function _e(t,e){return t.filter(o=>e.indexOf(o)<0)}function Ve(t){let{computedStates:e,currentStateIndex:o}=t;if(o>=e.length){let{state:i}=e[e.length-1];return i}let{state:n}=e[o];return n}function J(t){return new $(t,+Date.now())}function sn(t,e){return Object.keys(e).reduce((o,n)=>{let i=Number(n);return o[i]=Ge(t,e[i],i),o},{})}function Ge(t,e,o){return z(H({},e),{action:t(e.action,o)})}function cn(t,e){return e.map((o,n)=>({state:Ze(t,o.state,n),error:o.error}))}function Ze(t,e,o){return t(e,o)}function We(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function an(t,e,o,n){let i=[],s={},h=[];return t.stagedActionIds.forEach((u,S)=>{let p=t.actionsById[u];p&&(S&&Ft(t.computedStates[S],p,e,o,n)||(s[u]=p,i.push(u),h.push(t.computedStates[S])))}),z(H({},t),{stagedActionIds:i,actionsById:s,computedStates:h})}function Ft(t,e,o,n,i){let s=o&&!o(t,e.action),h=n&&!e.action.type.match(n.map(S=>Me(S)).join("|")),u=i&&e.action.type.match(i.map(S=>Me(S)).join("|"));return s||h||u}function Me(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ke(t){return{ngZone:t?G(ee):null,connectInZone:t}}var ut=(()=>{let e=class e extends ot{};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=te(e)))(s||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),rt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Lt=new V("@ngrx/store-devtools Redux Devtools Extension"),Xe=(()=>{let e=class e{constructor(n,i,s){this.config=i,this.dispatcher=s,this.zoneConfig=Ke(this.config.connectInZone),this.devtoolsExtension=n,this.createActionStreams()}notify(n,i){if(this.devtoolsExtension)if(n.type===Y){if(i.isLocked||i.isPaused)return;let s=Ve(i);if(We(this.config)&&Ft(s,n,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let h=this.config.stateSanitizer?Ze(this.config.stateSanitizer,s,i.currentStateIndex):s,u=this.config.actionSanitizer?Ge(this.config.actionSanitizer,n,i.nextActionId):n;this.sendToReduxDevtools(()=>this.extensionConnection.send(u,h))}else{let s=z(H({},i),{stagedActionIds:i.stagedActionIds,actionsById:this.config.actionSanitizer?sn(this.config.actionSanitizer,i.actionsById):i.actionsById,computedStates:this.config.stateSanitizer?cn(this.config.stateSanitizer,i.computedStates):i.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,s,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new St(n=>{let i=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=i,i.init(),i.subscribe(s=>n.next(s)),i.unsubscribe}):zt}createActionStreams(){let n=this.createChangesObservable().pipe(qt()),i=n.pipe(w(c=>c.type===rt.START)),s=n.pipe(w(c=>c.type===rt.STOP)),h=n.pipe(w(c=>c.type===rt.DISPATCH),M(c=>this.unwrapAction(c.payload)),Zt(c=>c.type===Pt?this.dispatcher.pipe(w(r=>r.type===bt),Vt(1e3),Q(1e3),M(()=>c),Gt(()=>vt(c)),Wt(1)):vt(c))),S=n.pipe(w(c=>c.type===rt.ACTION),M(c=>this.unwrapAction(c.payload))).pipe(tt(s)),p=h.pipe(tt(s));this.start$=i.pipe(tt(s)),this.actions$=this.start$.pipe(U(()=>S)),this.liftedActions$=this.start$.pipe(U(()=>p))}unwrapAction(n){return typeof n=="string"?(0,eval)(`(${n})`):n}getExtensionConfig(n){let i={name:n.name,features:n.features,serialize:n.serialize,autoPause:n.autoPause??!1,trace:n.trace??!1,traceLimit:n.traceLimit??75};return n.maxAge!==!1&&(i.maxAge=n.maxAge),i}sendToReduxDevtools(n){try{n()}catch(i){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",i)}}};e.\u0275fac=function(i){return new(i||e)(x(Lt),x(at),x(ut))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),ct={type:yt},un="@ngrx/store-devtools/recompute",pn={type:un};function qe(t,e,o,n,i){if(n)return{state:o,error:"Interrupted by an error up the chain"};let s=o,h;try{s=t(o,e)}catch(u){h=u.toString(),i.handleError(u)}return{state:s,error:h}}function st(t,e,o,n,i,s,h,u,S){if(e>=t.length&&t.length===s.length)return t;let p=t.slice(0,e),c=s.length-(S?1:0);for(let r=e;r<c;r++){let f=s[r],b=i[f].action,l=p[r-1],a=l?l.state:n,C=l?l.error:void 0,T=h.indexOf(f)>-1?l:qe(o,b,a,C,u);p.push(T)}return S&&p.push(t[t.length-1]),p}function ln(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:J(ct)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function mn(t,e,o,n,i={}){return s=>(h,u)=>{let{monitorState:S,actionsById:p,nextActionId:c,stagedActionIds:r,skippedActionIds:f,committedState:b,currentStateIndex:l,computedStates:a,isLocked:C,isPaused:A}=h||e;h||(p=Object.create(p));function T(g){let d=g,k=r.slice(1,d+1);for(let E=0;E<k.length;E++)if(a[E+1].error){d=E,k=r.slice(1,d+1);break}else delete p[k[E]];f=f.filter(E=>k.indexOf(E)===-1),r=[0,...r.slice(d+1)],b=a[d].state,a=a.slice(d),l=l>d?l-d:0}function N(){p={0:J(ct)},c=1,r=[0],f=[],b=a[l].state,l=0,a=[]}let m=0;switch(u.type){case He:{C=u.status,m=1/0;break}case ze:{A=u.status,A?(r=[...r,c],p[c]=new $({type:"@ngrx/devtools/pause"},+Date.now()),c++,m=r.length-1,a=a.concat(a[a.length-1]),l===r.length-2&&l++,m=1/0):N();break}case je:{p={0:J(ct)},c=1,r=[0],f=[],b=t,l=0,a=[];break}case Le:{N();break}case De:{p={0:J(ct)},c=1,r=[0],f=[],l=0,a=[];break}case Fe:{let{id:g}=u;f.indexOf(g)===-1?f=[g,...f]:f=f.filter(k=>k!==g),m=r.indexOf(g);break}case nn:{let{start:g,end:d,active:k}=u,E=[];for(let gt=g;gt<d;gt++)E.push(gt);k?f=_e(f,E):f=[...f,...E],m=r.indexOf(g);break}case $e:{l=u.index,m=1/0;break}case Be:{let g=r.indexOf(u.actionId);g!==-1&&(l=g),m=1/0;break}case Pe:{r=_e(r,f),f=[],l=Math.min(l,r.length-1);break}case Y:{if(C)return h||e;if(A||h&&Ft(h.computedStates[l],u,i.predicate,i.actionsSafelist,i.actionsBlocklist)){let d=a[a.length-1];a=[...a.slice(0,-1),qe(s,u.action,d.state,d.error,o)],m=1/0;break}i.maxAge&&r.length===i.maxAge&&T(1),l===r.length-1&&l++;let g=c++;p[g]=u,r=[...r,g],m=r.length-1;break}case Pt:{({monitorState:S,actionsById:p,nextActionId:c,stagedActionIds:r,skippedActionIds:f,committedState:b,currentStateIndex:l,computedStates:a,isLocked:C,isPaused:A}=u.nextLiftedState);break}case yt:{m=0,i.maxAge&&r.length>i.maxAge&&(a=st(a,m,s,b,p,r,f,o,A),T(r.length-i.maxAge),m=1/0);break}case bt:{if(a.filter(d=>d.error).length>0)m=0,i.maxAge&&r.length>i.maxAge&&(a=st(a,m,s,b,p,r,f,o,A),T(r.length-i.maxAge),m=1/0);else{if(!A&&!C){l===r.length-1&&l++;let d=c++;p[d]=new $(u,+Date.now()),r=[...r,d],m=r.length-1,a=st(a,m,s,b,p,r,f,o,A)}a=a.map(d=>z(H({},d),{state:s(d.state,pn)})),l=r.length-1,i.maxAge&&r.length>i.maxAge&&T(r.length-i.maxAge),m=1/0}break}default:{m=1/0;break}}return a=st(a,m,s,b,p,r,f,o,A),S=n(S,u),{monitorState:S,actionsById:p,nextActionId:c,stagedActionIds:r,skippedActionIds:f,committedState:b,currentStateIndex:l,computedStates:a,isLocked:C,isPaused:A}}}var Ne=(()=>{let e=class e{constructor(n,i,s,h,u,S,p,c){let r=ln(p,c.monitor),f=mn(p,r,S,c.monitor,c),b=It(It(i.asObservable().pipe(Jt(1)),h.actions$).pipe(M(J)),n,h.liftedActions$).pipe(Ut(Ht)),l=s.pipe(M(f)),a=Ke(c.connectInZone),C=new Bt(1);this.liftedStateSubscription=b.pipe(Yt(l),Re(a),Xt(({state:N},[m,g])=>{let d=g(N,m);return m.type!==Y&&We(c)&&(d=an(d,c.predicate,c.actionsSafelist,c.actionsBlocklist)),h.notify(m,d),{state:d,action:m}},{state:r,action:null})).subscribe(({state:N,action:m})=>{if(C.next(N),m.type===Y){let g=m.action;u.next(g)}}),this.extensionStartSubscription=h.start$.pipe(Re(a)).subscribe(()=>{this.refresh()});let A=C.asObservable(),T=A.pipe(M(Ve));Object.defineProperty(T,"state",{value:Se(T,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=n,this.liftedState=A,this.state=T}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(n){this.dispatcher.next(n)}next(n){this.dispatcher.next(n)}error(n){}complete(){}performAction(n){this.dispatch(new $(n,+Date.now()))}refresh(){this.dispatch(new Ct)}reset(){this.dispatch(new Tt(+Date.now()))}rollback(){this.dispatch(new Ot(+Date.now()))}commit(){this.dispatch(new kt(+Date.now()))}sweep(){this.dispatch(new wt)}toggleAction(n){this.dispatch(new _t(n))}jumpToAction(n){this.dispatch(new Nt(n))}jumpToState(n){this.dispatch(new Mt(n))}importState(n){this.dispatch(new Rt(n))}lockChanges(n){this.dispatch(new jt(n))}pauseRecording(n){this.dispatch(new Dt(n))}};e.\u0275fac=function(i){return new(i||e)(x(ut),x(ot),x(Ie),x(Xe),x(xe),x(ne),x(ve),x(at))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function Re({ngZone:t,connectInZone:e}){return o=>e?new St(n=>o.subscribe({next:i=>t.run(()=>n.next(i)),error:i=>t.run(()=>n.error(i)),complete:()=>t.run(()=>n.complete())})):o}var fn=new V("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function dn(t,e){return!!t||e.monitor!==Ue}function hn(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function gn(t={}){return Qt([Xe,ut,Ne,{provide:we,useValue:t},{provide:fn,deps:[Lt,at],useFactory:dn},{provide:Lt,useFactory:hn},{provide:at,deps:[we],useFactory:rn},{provide:ye,deps:[Ne],useFactory:Sn},{provide:Ae,useExisting:ut}])}function Sn(t){return t.state}var Je=(()=>{let e=class e{static instrument(n={}){return{ngModule:e,providers:[gn(n)]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=L({type:e}),e.\u0275inj=j({});let t=e;return t})();var In=t=>["/books",t];function An(t,e){if(t&1&&(v(0,"li")(1,"a",6),y(2),v(3,"p",7),y(4),I()()()),t&2){let o=e.$implicit;O(),_("routerLink",ce(3,In,o.isbn)),O(),se(" ",o.title," "),O(2),re(o.subtitle)}}function xn(t,e){t&1&&(v(0,"li"),y(1,"No results"),I())}function yn(t,e){if(t&1&&(v(0,"ul",3),K(1,An,5,5,"li",4)(2,xn,2,0,"li",5),I()),t&2){let o=e.ngIf;O(),_("ngForOf",o),O(),_("ngIf",!o.length)}}var pt=class t{constructor(e){this.service=e;this.results$=this.input$.pipe(w(o=>o.length>=3),Q(500),Kt(),At(()=>this.isLoading=!0),U(o=>this.service.getAllSearch(o)),At(()=>this.isLoading=!1))}input$=new $t;isLoading=!1;results$;static \u0275fac=function(o){return new(o||t)(et(ke))};static \u0275cmp=D({type:t,selectors:[["bm-search"]],decls:4,vars:5,consts:[["searchInput",""],["type","search","autocomplete","off","aria-label","Search",3,"input"],["class","search-results",4,"ngIf"],[1,"search-results"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"routerLink"],["role","doc-subtitle"]],template:function(o,n){if(o&1){let i=X();v(0,"input",1,0),q("input",function(){Z(i);let h=oe(1);return W(n.input$.next(h.value))}),I(),K(2,yn,3,2,"ul",2),ae(3,"async")}o&2&&(ie("loading",n.isLoading),O(2),_("ngIf",ue(3,3,n.results$)))},dependencies:[le,it,P,me]})};var lt=class t{static \u0275fac=function(o){return new(o||t)};static \u0275cmp=D({type:t,selectors:[["bm-home"]],decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(o,n){o&1&&(v(0,"h1"),y(1,"Home"),I(),v(2,"a",0),y(3,` Show book list
`),I(),v(4,"h2"),y(5,"Search"),I(),nt(6,"bm-search"))},dependencies:[P,pt]})};var tn=()=>{let t=G(F),e=G(Te);return t.isAuthenticated?!0:(window.alert("Not logged in!"),e.parseUrl("/home"))};var En=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:lt},{path:"books",loadChildren:()=>import("./chunk-34QVNLWW.js").then(t=>t.BooksModule)},{path:"admin",loadChildren:()=>import("./chunk-ZNLMLKG5.js").then(t=>t.AdminModule),canActivate:[tn]}],mt=class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=L({type:t});static \u0275inj=j({imports:[Et.forRoot(En),Et]})};function Tn(t,e){if(t&1){let o=X();v(0,"button",6),q("click",function(){Z(o);let i=xt();return W(i.auth.login())}),y(1,"Login"),I()}}function On(t,e){if(t&1){let o=X();v(0,"button",7),q("click",function(){Z(o);let i=xt();return W(i.auth.logout())}),y(1,"Logout"),I()}}var ft=class t{constructor(e){this.auth=e}static \u0275fac=function(o){return new(o||t)(et(F))};static \u0275cmp=D({type:t,selectors:[["bm-root"]],decls:12,vars:2,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],["class","green",3,"click",4,"ngIf"],["class","red",3,"click",4,"ngIf"],[1,"green",3,"click"],[1,"red",3,"click"]],template:function(o,n){o&1&&(v(0,"nav")(1,"a",0),y(2,"Home"),I(),v(3,"a",1),y(4,"Books"),I(),v(5,"a",2),y(6,"Administration"),I(),v(7,"div",3),K(8,Tn,2,0,"button",4)(9,On,2,0,"button",5),I()(),v(10,"main"),nt(11,"router-outlet"),I()),o&2&&(O(8),_("ngIf",!n.auth.isAuthenticated),O(),_("ngIf",n.auth.isAuthenticated))},dependencies:[it,Ce,P,Oe]})};var dt=class t{constructor(e){this.authService=e}intercept(e,o){let n="1234567890";if(this.authService.isAuthenticated){let i=e.clone({setHeaders:{Authorization:`Bearer ${n}`}});return o.handle(i)}else return o.handle(e)}static \u0275fac=function(o){return new(o||t)(x(F))};static \u0275prov=R({token:t,factory:t.\u0275fac})};var ht=class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=L({type:t,bootstrap:[ft]});static \u0275inj=j({providers:[{provide:fe,useClass:dt,multi:!0}],imports:[ge,mt,de,be.forRoot({},{}),Je.instrument({maxAge:25,logOnly:!pe()}),Ee.forRoot([])]})};he().bootstrapModule(ht,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
