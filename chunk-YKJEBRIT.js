import{b as A,c as V,l as lt,m as H,n as ft,o as dt,p as $,q as ut,r as kt,s as bt,t as vt,u as gt,v as Bt}from"./chunk-JT6RYYNA.js";import{$ as D,$a as O,Aa as m,Ba as v,Ca as g,F as Q,Fa as st,G as W,Ga as u,Ha as k,Ia as at,Ja as mt,L as X,M as E,Ma as B,Na as _,O as U,Oa as T,Pa as ct,Q as h,Qa as pt,R as F,S as L,T as Y,V as Z,Va as ht,W as tt,Xa as xt,Ya as j,_a as K,a as y,b as S,d as z,fa as s,ga as d,ia as et,k as q,m as G,ma as c,oa as it,pa as l,qa as a,r as J,ra as n,sa as x,ta as ot,ua as nt,va as rt,xa as w,ya as f}from"./chunk-USVYWTSC.js";var _t=(()=>{let e=class e{constructor(){this.confirm=new et}onClick(){window.confirm(this.confirmText)&&this.confirm.emit()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=L({type:e,selectors:[["","bmConfirm",""]],hostBindings:function(o,p){o&1&&w("click",function(){return p.onClick()})},inputs:{confirmText:["bmConfirm","confirmText"]},outputs:{confirm:"confirm"}});let t=e;return t})();var It=(()=>{let e=class e{constructor(r,o,p){this.template=r,this.viewContainer=o,this.authService=p,this.destroy$=new z,this.authService.isAuthenticated$.pipe(W(this.destroy$)).subscribe(C=>{C?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}ngOnDestroy(){this.destroy$.next()}};e.\u0275fac=function(o){return new(o||e)(d(mt),d(it),d(Bt))},e.\u0275dir=L({type:e,selectors:[["","bmLoggedinOnly",""]]});let t=e;return t})();var M=(()=>{let e=class e{transform(r){return r?`${r.substring(0,3)}-${r.substring(3)}`:""}};e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=Y({name:"isbn",type:e,pure:!0});let t=e;return t})();function Ut(t,e){if(t&1&&(a(0,"p",9),m(1),n()),t&2){let i=f().ngIf;s(1),v(i.subtitle)}}function Vt(t,e){if(t&1&&(a(0,"li"),m(1),n()),t&2){let i=e.$implicit;s(1),v(i)}}function Ht(t,e){if(t&1&&(a(0,"div")(1,"h2"),m(2,"Published"),n(),m(3),u(4,"date"),n()),t&2){let i=f().ngIf;s(3),g(" ",at(4,1,i.published,"longDate")," ")}}function Kt(t,e){if(t&1&&x(0,"img",10),t&2){let i=f().ngIf;c("src",i.thumbnailUrl,D)}}var zt=t=>["/admin/edit",t];function qt(t,e){if(t&1){let i=rt();ot(0),a(1,"button",11),w("confirm",function(){Z(i);let o=f().ngIf,p=f();return tt(p.removeBook(o.isbn))}),m(2," Remove book "),n(),a(3,"a",12),m(4," Edit book "),n(),nt()}if(t&2){let i=f().ngIf;s(3),c("routerLink",st(1,zt,i.isbn))}}function Gt(t,e){if(t&1&&(a(0,"div",1)(1,"h1"),m(2),n(),l(3,Ut,2,1,"p",2),a(4,"div",3)(5,"div")(6,"h2"),m(7,"Authors"),n(),a(8,"ul"),l(9,Vt,2,1,"li",4),n()(),a(10,"div")(11,"h2"),m(12,"ISBN"),n(),m(13),u(14,"isbn"),n(),l(15,Ht,5,4,"div",5),n(),a(16,"h2"),m(17,"Description"),n(),a(18,"p"),m(19),n(),l(20,Kt,1,1,"img",6),a(21,"a",7),m(22,"Back to list"),n(),l(23,qt,5,3,"ng-container",8),n()),t&2){let i=e.ngIf;s(2),v(i.title),s(1),c("ngIf",i.subtitle),s(6),c("ngForOf",i.authors),s(4),g(" ",k(14,7,i.isbn)," "),s(2),c("ngIf",i.published),s(4),v(i.description),s(1),c("ngIf",i.thumbnailUrl)}}var St=(()=>{let e=class e{constructor(r,o,p){this.service=r,this.route=o,this.router=p;let C=this.route.snapshot.paramMap.get("isbn");this.book$=this.service.getSingle(C)}removeBook(r){this.service.remove(r).subscribe(()=>{this.router.navigateByUrl("/books")})}};e.\u0275fac=function(o){return new(o||e)(d(O),d(ht),d(xt))},e.\u0275cmp=h({type:e,selectors:[["bm-book-details"]],decls:2,vars:3,consts:[["class","details",4,"ngIf"],[1,"details"],["role","doc-subtitle",4,"ngIf"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],["alt","Cover",3,"src",4,"ngIf"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["role","doc-subtitle"],["alt","Cover",3,"src"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(o,p){o&1&&(l(0,Gt,24,9,"div",0),u(1,"async")),o&2&&c("ngIf",k(1,1,p.book$))},dependencies:[B,_,j,_t,It,T,ct,M]});let t=e;return t})();var I=A("[Book] Load Books"),N=A("[Book] Load Books Success",V()),R=A("[Book] Load Books Failure",V());var P="book",Jt={books:[],loading:!1},Ft=ut(Jt,$(I,t=>S(y({},t),{loading:!0})),$(N,(t,e)=>S(y({},t),{books:e.data,loading:!1})),$(R,(t,e)=>S(y({},t),{loading:!1})));var Dt=ft(P),wt=H(Dt,t=>t.loading),Tt=H(Dt,t=>t.books);function Qt(t,e){if(t&1&&x(0,"img",6),t&2){let i=f(2);c("src",i.book.thumbnailUrl,D)}}function Wt(t,e){if(t&1&&(a(0,"p",7),m(1),n()),t&2){let i=f(2);s(1),g(" ",i.book.subtitle," ")}}function Xt(t,e){if(t&1&&(a(0,"li"),m(1),n()),t&2){let i=e.$implicit;s(1),g(" ",i," ")}}function Yt(t,e){if(t&1&&(a(0,"a",1),l(1,Qt,1,1,"img",2),a(2,"h2"),m(3),n(),l(4,Wt,2,1,"p",3),a(5,"ul",4),l(6,Xt,2,1,"li",5),n(),a(7,"div"),m(8),u(9,"isbn"),n()()),t&2){let i=f();c("routerLink",i.book.isbn),s(1),c("ngIf",i.book.thumbnailUrl),s(2),v(i.book.title),s(1),c("ngIf",i.book.subtitle),s(2),c("ngForOf",i.book.authors),s(2),g("ISBN ",k(9,6,i.book.isbn),"")}}var At=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=h({type:e,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[["class","list-item",3,"routerLink",4,"ngIf"],[1,"list-item",3,"routerLink"],["alt","Cover",3,"src",4,"ngIf"],["role","doc-subtitle",4,"ngIf"],[1,"comma-list"],[4,"ngFor","ngForOf"],["alt","Cover",3,"src"],["role","doc-subtitle"]],template:function(o,p){o&1&&l(0,Yt,10,8,"a",0),o&2&&c("ngIf",p.book)},dependencies:[B,_,j,M]});let t=e;return t})();function te(t,e){if(t&1&&(a(0,"li"),x(1,"bm-book-list-item",5),n()),t&2){let i=e.$implicit;s(1),c("book",i)}}function ee(t,e){t&1&&(a(0,"li"),m(1," No books available. "),n())}function ie(t,e){if(t&1&&(a(0,"ul",2),l(1,te,2,1,"li",3)(2,ee,2,0,"li",4),n()),t&2){let i=e.ngIf;s(1),c("ngForOf",i),s(1),c("ngIf",!i.length)}}function oe(t,e){t&1&&(a(0,"div",6),m(1,"Loading ..."),n())}var $t=(()=>{let e=class e{constructor(r){this.store=r,this.books$=this.store.select(Tt),this.loading$=this.store.select(wt),this.store.dispatch(I())}};e.\u0275fac=function(o){return new(o||e)(d(lt))},e.\u0275cmp=h({type:e,selectors:[["bm-book-list"]],decls:6,vars:6,consts:[["class","book-list",4,"ngIf"],["class","loader",4,"ngIf"],[1,"book-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"book"],[1,"loader"]],template:function(o,p){o&1&&(a(0,"h1"),m(1,"Books"),n(),l(2,ie,3,2,"ul",0),u(3,"async"),l(4,oe,2,0,"div",1),u(5,"async")),o&2&&(s(2),c("ngIf",k(3,2,p.books$)),s(2),c("ngIf",k(5,4,p.loading$)))},dependencies:[B,_,At,T]});let t=e;return t})();var ne=[{path:"",component:$t},{path:":isbn",component:St}],jt=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=F({type:e}),e.\u0275inj=E({imports:[K.forChild(ne),K]});let t=e;return t})();var Ot=(()=>{let e=class e{constructor(r,o){this.actions$=r,this.service=o,this.loadBooks$=kt(()=>this.actions$.pipe(vt(I),Q(()=>this.service.getAll().pipe(G(p=>N({data:p})),J(p=>q(R({error:p.message})))))))}};e.\u0275fac=function(o){return new(o||e)(U(bt),U(O))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})();var Je=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=F({type:e}),e.\u0275inj=E({imports:[pt,jt,dt.forFeature(P,Ft),gt.forFeature([Ot])]});let t=e;return t})();export{Je as BooksModule};
