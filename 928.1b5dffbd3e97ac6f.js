"use strict";(self.webpackChunkbook_monkey=self.webpackChunkbook_monkey||[]).push([[928],{9928:(to,B,e)=>{e.r(B),e.d(B,{BooksModule:()=>m});var c=e(6895),s=e(9653),v=e(2655),l=e(3841),o=e(4650),Z=e(6384);class p{constructor(){this.confirm=new o.vpe}onClick(){window.confirm(this.confirmText)&&this.confirm.emit()}}p.\u0275fac=function(n){return new(n||p)},p.\u0275dir=o.lG2({type:p,selectors:[["","bmConfirm",""]],hostBindings:function(n,i){1&n&&o.NdJ("click",function(){return i.onClick()})},inputs:{confirmText:["bmConfirm","confirmText"]},outputs:{confirm:"confirm"}});var A=e(7579),I=e(2722),y=e(8338);class g{constructor(n,i,r){this.template=n,this.viewContainer=i,this.authService=r,this.destroy$=new A.x,this.authService.isAuthenticated$.pipe((0,I.R)(this.destroy$)).subscribe(h=>{h?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}ngOnDestroy(){this.destroy$.next()}}g.\u0275fac=function(n){return new(n||g)(o.Y36(o.Rgc),o.Y36(o.s_b),o.Y36(y.e))},g.\u0275dir=o.lG2({type:g,selectors:[["","bmLoggedinOnly",""]]});class a{transform(n){return n?`${n.substring(0,3)}-${n.substring(3)}`:""}}function U(t,n){if(1&t&&(o.TgZ(0,"p",9),o._uU(1),o.qZA()),2&t){const i=o.oxw().ngIf;o.xp6(1),o.Oqu(i.subtitle)}}function F(t,n){if(1&t&&(o.TgZ(0,"li"),o._uU(1),o.qZA()),2&t){const i=n.$implicit;o.xp6(1),o.Oqu(i)}}function Y(t,n){if(1&t&&(o.TgZ(0,"div")(1,"h2"),o._uU(2,"Published"),o.qZA(),o._uU(3),o.ALo(4,"date"),o.qZA()),2&t){const i=o.oxw().ngIf;o.xp6(3),o.hij(" ",o.xi3(4,1,i.published,"longDate")," ")}}function J(t,n){if(1&t&&o._UZ(0,"img",10),2&t){const i=o.oxw().ngIf;o.Q6J("src",i.thumbnailUrl,o.LSH)}}a.\u0275fac=function(n){return new(n||a)},a.\u0275pipe=o.Yjl({name:"isbn",type:a,pure:!0});const O=function(t){return["/admin/edit",t]};function Q(t,n){if(1&t){const i=o.EpF();o.ynx(0),o.TgZ(1,"button",11),o.NdJ("confirm",function(){o.CHM(i);const h=o.oxw().ngIf,oo=o.oxw();return o.KtG(oo.removeBook(h.isbn))}),o._uU(2," Remove book "),o.qZA(),o.TgZ(3,"a",12),o._uU(4," Edit book "),o.qZA(),o.BQk()}if(2&t){const i=o.oxw().ngIf;o.xp6(3),o.Q6J("routerLink",o.VKq(1,O,i.isbn))}}function q(t,n){if(1&t&&(o.TgZ(0,"div",1)(1,"h1"),o._uU(2),o.qZA(),o.YNc(3,U,2,1,"p",2),o.TgZ(4,"div",3)(5,"div")(6,"h2"),o._uU(7,"Authors"),o.qZA(),o.TgZ(8,"ul"),o.YNc(9,F,2,1,"li",4),o.qZA()(),o.TgZ(10,"div")(11,"h2"),o._uU(12,"ISBN"),o.qZA(),o._uU(13),o.ALo(14,"isbn"),o.qZA(),o.YNc(15,Y,5,4,"div",5),o.qZA(),o.TgZ(16,"h2"),o._uU(17,"Description"),o.qZA(),o.TgZ(18,"p"),o._uU(19),o.qZA(),o.YNc(20,J,1,1,"img",6),o.TgZ(21,"a",7),o._uU(22,"Back to list"),o.qZA(),o.YNc(23,Q,5,3,"ng-container",8),o.qZA()),2&t){const i=n.ngIf;o.xp6(2),o.Oqu(i.title),o.xp6(1),o.Q6J("ngIf",i.subtitle),o.xp6(6),o.Q6J("ngForOf",i.authors),o.xp6(4),o.hij(" ",o.lcZ(14,7,i.isbn)," "),o.xp6(2),o.Q6J("ngIf",i.published),o.xp6(4),o.Oqu(i.description),o.xp6(1),o.Q6J("ngIf",i.thumbnailUrl)}}class d{constructor(n,i,r){this.service=n,this.route=i,this.router=r;const h=this.route.snapshot.paramMap.get("isbn");this.book$=this.service.getSingle(h)}removeBook(n){this.service.remove(n).subscribe(()=>{this.router.navigateByUrl("/books")})}}d.\u0275fac=function(n){return new(n||d)(o.Y36(Z.T),o.Y36(l.gz),o.Y36(l.F0))},d.\u0275cmp=o.Xpm({type:d,selectors:[["bm-book-details"]],decls:2,vars:3,consts:[["class","details",4,"ngIf"],[1,"details"],["role","doc-subtitle",4,"ngIf"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],["alt","Cover",3,"src",4,"ngIf"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["role","doc-subtitle"],["alt","Cover",3,"src"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(n,i){1&n&&(o.YNc(0,q,24,9,"div",0),o.ALo(1,"async")),2&n&&o.Q6J("ngIf",o.lcZ(1,1,i.book$))},dependencies:[c.sg,c.O5,l.rH,p,g,c.Ov,c.uU,a]});const _=(0,s.PH)("[Book] Load Books"),x=(0,s.PH)("[Book] Load Books Success",(0,s.Ky)()),T=(0,s.PH)("[Book] Load Books Failure",(0,s.Ky)()),C="book",N=(0,s.Lq)({books:[],loading:!1},(0,s.on)(_,t=>({...t,loading:!0})),(0,s.on)(x,(t,n)=>({...t,books:n.data,loading:!1})),(0,s.on)(T,(t,n)=>({...t,loading:!1}))),L=(0,s.ZF)(C),w=(0,s.P1)(L,t=>t.loading),$=(0,s.P1)(L,t=>t.books);function S(t,n){if(1&t&&o._UZ(0,"img",6),2&t){const i=o.oxw(2);o.Q6J("src",i.book.thumbnailUrl,o.LSH)}}function H(t,n){if(1&t&&(o.TgZ(0,"p",7),o._uU(1),o.qZA()),2&t){const i=o.oxw(2);o.xp6(1),o.hij(" ",i.book.subtitle," ")}}function j(t,n){if(1&t&&(o.TgZ(0,"li"),o._uU(1),o.qZA()),2&t){const i=n.$implicit;o.xp6(1),o.hij(" ",i," ")}}function M(t,n){if(1&t&&(o.TgZ(0,"a",1),o.YNc(1,S,1,1,"img",2),o.TgZ(2,"h2"),o._uU(3),o.qZA(),o.YNc(4,H,2,1,"p",3),o.TgZ(5,"ul",4),o.YNc(6,j,2,1,"li",5),o.qZA(),o.TgZ(7,"div"),o._uU(8),o.ALo(9,"isbn"),o.qZA()()),2&t){const i=o.oxw();o.Q6J("routerLink",i.book.isbn),o.xp6(1),o.Q6J("ngIf",i.book.thumbnailUrl),o.xp6(2),o.Oqu(i.book.title),o.xp6(1),o.Q6J("ngIf",i.book.subtitle),o.xp6(2),o.Q6J("ngForOf",i.book.authors),o.xp6(2),o.hij("ISBN ",o.lcZ(9,6,i.book.isbn),"")}}class k{}function P(t,n){if(1&t&&(o.TgZ(0,"li"),o._UZ(1,"bm-book-list-item",5),o.qZA()),2&t){const i=n.$implicit;o.xp6(1),o.Q6J("book",i)}}function E(t,n){1&t&&(o.TgZ(0,"li"),o._uU(1," No books available. "),o.qZA())}function G(t,n){if(1&t&&(o.TgZ(0,"ul",2),o.YNc(1,P,2,1,"li",3),o.YNc(2,E,2,0,"li",4),o.qZA()),2&t){const i=n.ngIf;o.xp6(1),o.Q6J("ngForOf",i),o.xp6(1),o.Q6J("ngIf",!i.length)}}function K(t,n){1&t&&(o.TgZ(0,"div",6),o._uU(1,"Loading ..."),o.qZA())}k.\u0275fac=function(n){return new(n||k)},k.\u0275cmp=o.Xpm({type:k,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[["class","list-item",3,"routerLink",4,"ngIf"],[1,"list-item",3,"routerLink"],["alt","Cover",3,"src",4,"ngIf"],["role","doc-subtitle",4,"ngIf"],[1,"comma-list"],[4,"ngFor","ngForOf"],["alt","Cover",3,"src"],["role","doc-subtitle"]],template:function(n,i){1&n&&o.YNc(0,M,10,8,"a",0),2&n&&o.Q6J("ngIf",i.book)},dependencies:[c.sg,c.O5,l.rH,a]});class b{constructor(n){this.store=n,this.books$=this.store.select($),this.loading$=this.store.select(w),this.store.dispatch(_())}}b.\u0275fac=function(n){return new(n||b)(o.Y36(s.yh))},b.\u0275cmp=o.Xpm({type:b,selectors:[["bm-book-list"]],decls:6,vars:6,consts:[["class","book-list",4,"ngIf"],["class","loader",4,"ngIf"],[1,"book-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"book"],[1,"loader"]],template:function(n,i){1&n&&(o.TgZ(0,"h1"),o._uU(1,"Books"),o.qZA(),o.YNc(2,G,3,2,"ul",0),o.ALo(3,"async"),o.YNc(4,K,2,0,"div",1),o.ALo(5,"async")),2&n&&(o.xp6(2),o.Q6J("ngIf",o.lcZ(3,2,i.books$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(5,4,i.loading$)))},dependencies:[c.sg,c.O5,k,c.Ov]});const R=[{path:"",component:b},{path:":isbn",component:d}];class u{}u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=o.oAB({type:u}),u.\u0275inj=o.cJS({imports:[l.Bz.forChild(R),l.Bz]});var z=e(3900),X=e(4004),V=e(262),W=e(9646);class f{constructor(n,i){this.actions$=n,this.service=i,this.loadBooks$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(_),(0,z.w)(()=>this.service.getAll().pipe((0,X.U)(r=>x({data:r})),(0,V.K)(r=>(0,W.of)(T({error:r.message})))))))}}f.\u0275fac=function(n){return new(n||f)(o.LFG(v.eX),o.LFG(Z.T))},f.\u0275prov=o.Yz7({token:f,factory:f.\u0275fac});class m{}m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=o.oAB({type:m}),m.\u0275inj=o.cJS({imports:[c.ez,u,s.Aw.forFeature(C,N),v.sQ.forFeature([f])]})}}]);