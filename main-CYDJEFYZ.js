import{a as pe,d as gt,e as ot,f as fe,g as de,h as me,i as St,j as he,k as ge,o as Se,u as xe,v as $}from"./chunk-57NZHF2R.js";import{$ as Xt,$a as Ae,Aa as Qt,Ba as te,C as Vt,D as Ht,E as Gt,Ea as ee,F as V,Fa as ne,G as tt,Ga as ie,H as mt,I as Zt,Ja as oe,L as R,M as j,Ma as re,N as H,Na as it,O as v,Oa as se,P as G,R as L,Ra as ce,S as D,Sa as ae,Ta as ue,Ua as le,V as Wt,Wa as ye,Xa as Ie,Y as Z,Ya as P,Z as W,Za as ve,_ as Kt,_a as xt,a as B,b as U,c as pt,d as Rt,ea as C,f as jt,fa as et,g as Lt,h as Dt,i as Pt,ia as qt,k as ft,l as $t,m as M,ma as K,oa as _,p as dt,pa as Jt,q as k,qa as x,r as Ft,ra as y,s as zt,sa as nt,t as Q,u as Bt,va as X,wa as q,x as Ut,xa as ht,ya as Yt,za as A}from"./chunk-HN6RFXSY.js";var Y="PERFORM_ACTION",tn="REFRESH",we="RESET",ke="ROLLBACK",_e="COMMIT",Me="SWEEP",Ne="TOGGLE_ACTION",en="SET_ACTIONS_ACTIVE",Re="JUMP_TO_STATE",je="JUMP_TO_ACTION",Mt="IMPORT_STATE",Le="LOCK_CHANGES",De="PAUSE_RECORDING",F=class{constructor(t,o){if(this.action=t,this.timestamp=o,this.type=Y,typeof t.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},yt=class{constructor(){this.type=tn}},It=class{constructor(t){this.timestamp=t,this.type=we}},vt=class{constructor(t){this.timestamp=t,this.type=ke}},At=class{constructor(t){this.timestamp=t,this.type=_e}},Et=class{constructor(){this.type=Me}},bt=class{constructor(t){this.id=t,this.type=Ne}};var Tt=class{constructor(t){this.index=t,this.type=Re}},Ot=class{constructor(t){this.actionId=t,this.type=je}},Ct=class{constructor(t){this.nextLiftedState=t,this.type=Mt}},wt=class{constructor(t){this.status=t,this.type=Le}},kt=class{constructor(t){this.status=t,this.type=De}};var at=new H("@ngrx/store-devtools Options"),Ee=new H("@ngrx/store-devtools Initial Config");function Pe(){return null}var nn="NgRx Store DevTools";function on(e){let t={maxAge:!1,monitor:Pe,actionSanitizer:void 0,stateSanitizer:void 0,name:nn,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},o=typeof e=="function"?e():e,i=o.logOnly?{pause:!0,export:!0,test:!0}:!1,n=o.features||i||t.features;n.import===!0&&(n.import="custom");let r=Object.assign({},t,{features:n},o);if(r.maxAge&&r.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${r.maxAge}`);return r}function be(e,t){return e.filter(o=>t.indexOf(o)<0)}function $e(e){let{computedStates:t,currentStateIndex:o}=e;if(o>=t.length){let{state:n}=t[t.length-1];return n}let{state:i}=t[o];return i}function J(e){return new F(e,+Date.now())}function rn(e,t){return Object.keys(t).reduce((o,i)=>{let n=Number(i);return o[n]=Fe(e,t[n],n),o},{})}function Fe(e,t,o){return U(B({},t),{action:e(t.action,o)})}function sn(e,t){return t.map((o,i)=>({state:ze(e,o.state,i),error:o.error}))}function ze(e,t,o){return e(t,o)}function Be(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function cn(e,t,o,i){let n=[],r={},f=[];return e.stagedActionIds.forEach((u,g)=>{let l=e.actionsById[u];l&&(g&&Nt(e.computedStates[g],l,t,o,i)||(r[u]=l,n.push(u),f.push(e.computedStates[g])))}),U(B({},e),{stagedActionIds:n,actionsById:r,computedStates:f})}function Nt(e,t,o,i,n){let r=o&&!o(e,t.action),f=i&&!t.action.type.match(i.map(g=>Te(g)).join("|")),u=n&&t.action.type.match(n.map(g=>Te(g)).join("|"));return r||f||u}function Te(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ue(e){return{ngZone:e?G(qt):null,connectInZone:e}}var ut=(()=>{let t=class t extends ot{};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=Kt(t)))(r||t)}})(),t.\u0275prov=R({token:t,factory:t.\u0275fac});let e=t;return e})(),rt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},_t=new H("@ngrx/store-devtools Redux Devtools Extension"),Ve=(()=>{let t=class t{constructor(i,n,r){this.config=n,this.dispatcher=r,this.zoneConfig=Ue(this.config.connectInZone),this.devtoolsExtension=i,this.createActionStreams()}notify(i,n){if(this.devtoolsExtension)if(i.type===Y){if(n.isLocked||n.isPaused)return;let r=$e(n);if(Be(this.config)&&Nt(r,i,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let f=this.config.stateSanitizer?ze(this.config.stateSanitizer,r,n.currentStateIndex):r,u=this.config.actionSanitizer?Fe(this.config.actionSanitizer,i,n.nextActionId):i;this.sendToReduxDevtools(()=>this.extensionConnection.send(u,f))}else{let r=U(B({},n),{stagedActionIds:n.stagedActionIds,actionsById:this.config.actionSanitizer?rn(this.config.actionSanitizer,n.actionsById):n.actionsById,computedStates:this.config.stateSanitizer?sn(this.config.stateSanitizer,n.computedStates):n.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,r,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new pt(i=>{let n=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=n,n.init(),n.subscribe(r=>i.next(r)),n.unsubscribe}):Dt}createActionStreams(){let i=this.createChangesObservable().pipe(Ht()),n=i.pipe(k(c=>c.type===rt.START)),r=i.pipe(k(c=>c.type===rt.STOP)),f=i.pipe(k(c=>c.type===rt.DISPATCH),M(c=>this.unwrapAction(c.payload)),zt(c=>c.type===Mt?this.dispatcher.pipe(k(s=>s.type===St),$t(1e3),Q(1e3),M(()=>c),Ft(()=>ft(c)),Bt(1)):ft(c))),g=i.pipe(k(c=>c.type===rt.ACTION),M(c=>this.unwrapAction(c.payload))).pipe(tt(r)),l=f.pipe(tt(r));this.start$=n.pipe(tt(r)),this.actions$=this.start$.pipe(V(()=>g)),this.liftedActions$=this.start$.pipe(V(()=>l))}unwrapAction(i){return typeof i=="string"?(0,eval)(`(${i})`):i}getExtensionConfig(i){let n={name:i.name,features:i.features,serialize:i.serialize,autoPause:i.autoPause??!1,trace:i.trace??!1,traceLimit:i.traceLimit??75};return i.maxAge!==!1&&(n.maxAge=i.maxAge),n}sendToReduxDevtools(i){try{i()}catch(n){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",n)}}};t.\u0275fac=function(n){return new(n||t)(v(_t),v(at),v(ut))},t.\u0275prov=R({token:t,factory:t.\u0275fac});let e=t;return e})(),ct={type:gt},an="@ngrx/store-devtools/recompute",un={type:an};function He(e,t,o,i,n){if(i)return{state:o,error:"Interrupted by an error up the chain"};let r=o,f;try{r=e(o,t)}catch(u){f=u.toString(),n.handleError(u)}return{state:r,error:f}}function st(e,t,o,i,n,r,f,u,g){if(t>=e.length&&e.length===r.length)return e;let l=e.slice(0,t),c=r.length-(g?1:0);for(let s=t;s<c;s++){let m=r[s],E=n[m].action,p=l[s-1],a=p?p.state:i,T=p?p.error:void 0,O=f.indexOf(m)>-1?p:He(o,E,a,T,u);l.push(O)}return g&&l.push(e[e.length-1]),l}function ln(e,t){return{monitorState:t(void 0,{}),nextActionId:1,actionsById:{0:J(ct)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function pn(e,t,o,i,n={}){return r=>(f,u)=>{let{monitorState:g,actionsById:l,nextActionId:c,stagedActionIds:s,skippedActionIds:m,committedState:E,currentStateIndex:p,computedStates:a,isLocked:T,isPaused:I}=f||t;f||(l=Object.create(l));function O(S){let h=S,w=s.slice(1,h+1);for(let b=0;b<w.length;b++)if(a[b+1].error){h=b,w=s.slice(1,h+1);break}else delete l[w[b]];m=m.filter(b=>w.indexOf(b)===-1),s=[0,...s.slice(h+1)],E=a[h].state,a=a.slice(h),p=p>h?p-h:0}function N(){l={0:J(ct)},c=1,s=[0],m=[],E=a[p].state,p=0,a=[]}let d=0;switch(u.type){case Le:{T=u.status,d=1/0;break}case De:{I=u.status,I?(s=[...s,c],l[c]=new F({type:"@ngrx/devtools/pause"},+Date.now()),c++,d=s.length-1,a=a.concat(a[a.length-1]),p===s.length-2&&p++,d=1/0):N();break}case we:{l={0:J(ct)},c=1,s=[0],m=[],E=e,p=0,a=[];break}case _e:{N();break}case ke:{l={0:J(ct)},c=1,s=[0],m=[],p=0,a=[];break}case Ne:{let{id:S}=u;m.indexOf(S)===-1?m=[S,...m]:m=m.filter(w=>w!==S),d=s.indexOf(S);break}case en:{let{start:S,end:h,active:w}=u,b=[];for(let lt=S;lt<h;lt++)b.push(lt);w?m=be(m,b):m=[...m,...b],d=s.indexOf(S);break}case Re:{p=u.index,d=1/0;break}case je:{let S=s.indexOf(u.actionId);S!==-1&&(p=S),d=1/0;break}case Me:{s=be(s,m),m=[],p=Math.min(p,s.length-1);break}case Y:{if(T)return f||t;if(I||f&&Nt(f.computedStates[p],u,n.predicate,n.actionsSafelist,n.actionsBlocklist)){let h=a[a.length-1];a=[...a.slice(0,-1),He(r,u.action,h.state,h.error,o)],d=1/0;break}n.maxAge&&s.length===n.maxAge&&O(1),p===s.length-1&&p++;let S=c++;l[S]=u,s=[...s,S],d=s.length-1;break}case Mt:{({monitorState:g,actionsById:l,nextActionId:c,stagedActionIds:s,skippedActionIds:m,committedState:E,currentStateIndex:p,computedStates:a,isLocked:T,isPaused:I}=u.nextLiftedState);break}case gt:{d=0,n.maxAge&&s.length>n.maxAge&&(a=st(a,d,r,E,l,s,m,o,I),O(s.length-n.maxAge),d=1/0);break}case St:{if(a.filter(h=>h.error).length>0)d=0,n.maxAge&&s.length>n.maxAge&&(a=st(a,d,r,E,l,s,m,o,I),O(s.length-n.maxAge),d=1/0);else{if(!I&&!T){p===s.length-1&&p++;let h=c++;l[h]=new F(u,+Date.now()),s=[...s,h],d=s.length-1,a=st(a,d,r,E,l,s,m,o,I)}a=a.map(h=>U(B({},h),{state:r(h.state,un)})),p=s.length-1,n.maxAge&&s.length>n.maxAge&&O(s.length-n.maxAge),d=1/0}break}default:{d=1/0;break}}return a=st(a,d,r,E,l,s,m,o,I),g=i(g,u),{monitorState:g,actionsById:l,nextActionId:c,stagedActionIds:s,skippedActionIds:m,committedState:E,currentStateIndex:p,computedStates:a,isLocked:T,isPaused:I}}}var Oe=(()=>{let t=class t{constructor(i,n,r,f,u,g,l,c){let s=ln(l,c.monitor),m=pn(l,s,g,c.monitor,c),E=dt(dt(n.asObservable().pipe(Gt(1)),f.actions$).pipe(M(J)),i,f.liftedActions$).pipe(Pt(Lt)),p=r.pipe(M(m)),a=Ue(c.connectInZone),T=new jt(1);this.liftedStateSubscription=E.pipe(Zt(p),Ce(a),Vt(({state:N},[d,S])=>{let h=S(N,d);return d.type!==Y&&Be(c)&&(h=cn(h,c.predicate,c.actionsSafelist,c.actionsBlocklist)),f.notify(d,h),{state:h,action:d}},{state:s,action:null})).subscribe(({state:N,action:d})=>{if(T.next(N),d.type===Y){let S=d.action;u.next(S)}}),this.extensionStartSubscription=f.start$.pipe(Ce(a)).subscribe(()=>{this.refresh()});let I=T.asObservable(),O=I.pipe(M($e));Object.defineProperty(O,"state",{value:pe(O,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=i,this.liftedState=I,this.state=O}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(i){this.dispatcher.next(i)}next(i){this.dispatcher.next(i)}error(i){}complete(){}performAction(i){this.dispatch(new F(i,+Date.now()))}refresh(){this.dispatch(new yt)}reset(){this.dispatch(new It(+Date.now()))}rollback(){this.dispatch(new vt(+Date.now()))}commit(){this.dispatch(new At(+Date.now()))}sweep(){this.dispatch(new Et)}toggleAction(i){this.dispatch(new bt(i))}jumpToAction(i){this.dispatch(new Ot(i))}jumpToState(i){this.dispatch(new Tt(i))}importState(i){this.dispatch(new Ct(i))}lockChanges(i){this.dispatch(new wt(i))}pauseRecording(i){this.dispatch(new kt(i))}};t.\u0275fac=function(n){return new(n||t)(v(ut),v(ot),v(de),v(Ve),v(he),v(Xt),v(fe),v(at))},t.\u0275prov=R({token:t,factory:t.\u0275fac});let e=t;return e})();function Ce({ngZone:e,connectInZone:t}){return o=>t?new pt(i=>o.subscribe({next:n=>e.run(()=>i.next(n)),error:n=>e.run(()=>i.error(n)),complete:()=>e.run(()=>i.complete())})):o}var fn=new H("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function dn(e,t){return!!e||t.monitor!==Pe}function mn(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function hn(e={}){return Wt([Ve,ut,Oe,{provide:Ee,useValue:e},{provide:fn,deps:[_t,at],useFactory:dn},{provide:_t,useFactory:mn},{provide:at,deps:[Ee],useFactory:on},{provide:ge,deps:[Oe],useFactory:gn},{provide:me,useExisting:ut}])}function gn(e){return e.state}var Ge=(()=>{let t=class t{static instrument(i={}){return{ngModule:t,providers:[hn(i)]}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=D({type:t}),t.\u0275inj=j({});let e=t;return e})();var xn=e=>["/books",e];function yn(e,t){if(e&1&&(x(0,"li")(1,"a",6),A(2),x(3,"p",7),A(4),y()()()),e&2){let o=t.$implicit;C(),_("routerLink",ee(3,xn,o.isbn)),C(),te(" ",o.title," "),C(2),Qt(o.subtitle)}}function In(e,t){e&1&&(x(0,"li"),A(1,"No results"),y())}function vn(e,t){if(e&1&&(x(0,"ul",3),K(1,yn,5,5,"li",4)(2,In,2,0,"li",5),y()),e&2){let o=t.ngIf;C(),_("ngForOf",o),C(),_("ngIf",!o.length)}}var We=(()=>{let t=class t{constructor(i){this.service=i,this.input$=new Rt,this.isLoading=!1,this.results$=this.input$.pipe(k(n=>n.length>=3),Q(500),Ut(),mt(()=>this.isLoading=!0),V(n=>this.service.getAllSearch(n)),mt(()=>this.isLoading=!1))}};t.\u0275fac=function(n){return new(n||t)(et(Ae))},t.\u0275cmp=L({type:t,selectors:[["bm-search"]],decls:4,vars:5,consts:[["searchInput",""],["type","search","autocomplete","off","aria-label","Search",3,"input"],["class","search-results",4,"ngIf"],[1,"search-results"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"routerLink"],["role","doc-subtitle"]],template:function(n,r){if(n&1){let f=X();x(0,"input",1,0),q("input",function(){Z(f);let g=Yt(1);return W(r.input$.next(g.value))}),y(),K(2,vn,3,2,"ul",2),ne(3,"async")}n&2&&(Jt("loading",r.isLoading),C(2),_("ngIf",ie(3,3,r.results$)))},dependencies:[re,it,P,se]});let e=t;return e})();var Ke=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=L({type:t,selectors:[["bm-home"]],decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(n,r){n&1&&(x(0,"h1"),A(1,"Home"),y(),x(2,"a",0),A(3,` Show book list
`),y(),x(4,"h2"),A(5,"Search"),y(),nt(6,"bm-search"))},dependencies:[P,We]});let e=t;return e})();var Xe=()=>{let e=G($),t=G(Ie);return e.isAuthenticated?!0:(window.alert("Not logged in!"),t.parseUrl("/home"))};var En=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Ke},{path:"books",loadChildren:()=>import("./chunk-U452YWLB.js").then(e=>e.BooksModule)},{path:"admin",loadChildren:()=>import("./chunk-772AG7PN.js").then(e=>e.AdminModule),canActivate:[Xe]}],qe=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=D({type:t}),t.\u0275inj=j({imports:[xt.forRoot(En),xt]});let e=t;return e})();function Tn(e,t){if(e&1){let o=X();x(0,"button",6),q("click",function(){Z(o);let n=ht();return W(n.auth.login())}),A(1,"Login"),y()}}function On(e,t){if(e&1){let o=X();x(0,"button",7),q("click",function(){Z(o);let n=ht();return W(n.auth.logout())}),A(1,"Logout"),y()}}var Je=(()=>{let t=class t{constructor(i){this.auth=i}};t.\u0275fac=function(n){return new(n||t)(et($))},t.\u0275cmp=L({type:t,selectors:[["bm-root"]],decls:12,vars:2,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],["class","green",3,"click",4,"ngIf"],["class","red",3,"click",4,"ngIf"],[1,"green",3,"click"],[1,"red",3,"click"]],template:function(n,r){n&1&&(x(0,"nav")(1,"a",0),A(2,"Home"),y(),x(3,"a",1),A(4,"Books"),y(),x(5,"a",2),A(6,"Administration"),y(),x(7,"div",3),K(8,Tn,2,0,"button",4)(9,On,2,0,"button",5),y()(),x(10,"main"),nt(11,"router-outlet"),y()),n&2&&(C(8),_("ngIf",!r.auth.isAuthenticated),C(),_("ngIf",r.auth.isAuthenticated))},dependencies:[it,ye,P,ve]});let e=t;return e})();var Ye=(()=>{let t=class t{constructor(i){this.authService=i}intercept(i,n){let r="1234567890";if(this.authService.isAuthenticated){let f=i.clone({setHeaders:{Authorization:`Bearer ${r}`}});return n.handle(f)}else return n.handle(i)}};t.\u0275fac=function(n){return new(n||t)(v($))},t.\u0275prov=R({token:t,factory:t.\u0275fac});let e=t;return e})();var Qe=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=D({type:t,bootstrap:[Je]}),t.\u0275inj=j({providers:[{provide:ce,useClass:Ye,multi:!0}],imports:[le,qe,ae,Se.forRoot({},{}),Ge.instrument({maxAge:25,logOnly:!oe()}),xe.forRoot([])]});let e=t;return e})();ue().bootstrapModule(Qe,{ngZoneEventCoalescing:!0}).catch(e=>console.error(e));
