import{a as Se,d as yt,e as ot,f as ve,g as Ie,h as Ae,i as bt,j as xe,k as ye,o as be,u as Ee,v as F}from"./chunk-UUI53VTU.js";import{$a as Et,Aa as re,Ba as se,C as Xt,D as qt,E as Jt,Ea as ce,F as U,Fa as ae,G as tt,Ga as ue,H as At,I as Yt,Ja as pe,L as R,M as D,N as V,Na as le,O as x,Oa as it,P as G,Pa as me,R as j,S as L,Sa as fe,Ta as de,Ua as he,V as Qt,Va as ge,Xa as Ce,Y as Z,Ya as Te,Z as W,Za as P,_ as te,_a as Oe,a as H,ab as _e,b as z,ba as ee,c as St,ca as ne,d as $t,f as Bt,fa as _,g as Ht,ga as et,h as zt,i as Ut,k as vt,l as Vt,m as N,ma as K,oa as M,p as It,pa as ie,q as w,qa as S,r as Gt,ra as I,s as Zt,sa as nt,t as Q,u as Wt,va as X,wa as q,x as Kt,xa as xt,ya as oe,za as y}from"./chunk-MDQ5FLPH.js";var Y="PERFORM_ACTION",en="REFRESH",De="RESET",je="ROLLBACK",Le="COMMIT",Pe="SWEEP",Fe="TOGGLE_ACTION",nn="SET_ACTIONS_ACTIVE",$e="JUMP_TO_STATE",Be="JUMP_TO_ACTION",Pt="IMPORT_STATE",He="LOCK_CHANGES",ze="PAUSE_RECORDING",$=class{constructor(n,e){if(this.action=n,this.timestamp=e,this.type=Y,typeof n.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Ct=class{constructor(){this.type=en}},Tt=class{constructor(n){this.timestamp=n,this.type=De}},Ot=class{constructor(n){this.timestamp=n,this.type=je}},_t=class{constructor(n){this.timestamp=n,this.type=Le}},kt=class{constructor(){this.type=Pe}},wt=class{constructor(n){this.id=n,this.type=Fe}};var Mt=class{constructor(n){this.index=n,this.type=$e}},Nt=class{constructor(n){this.actionId=n,this.type=Be}},Rt=class{constructor(n){this.nextLiftedState=n,this.type=Pt}},Dt=class{constructor(n){this.status=n,this.type=He}},jt=class{constructor(n){this.status=n,this.type=ze}};var at=new V("@ngrx/store-devtools Options"),ke=new V("@ngrx/store-devtools Initial Config");function Ue(){return null}var on="NgRx Store DevTools";function rn(t){let n={maxAge:!1,monitor:Ue,actionSanitizer:void 0,stateSanitizer:void 0,name:on,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,i=e.logOnly?{pause:!0,export:!0,test:!0}:!1,o=e.features||i||n.features;o.import===!0&&(o.import="custom");let a=Object.assign({},n,{features:o},e);if(a.maxAge&&a.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${a.maxAge}`);return a}function we(t,n){return t.filter(e=>n.indexOf(e)<0)}function Ve(t){let{computedStates:n,currentStateIndex:e}=t;if(e>=n.length){let{state:o}=n[n.length-1];return o}let{state:i}=n[e];return i}function J(t){return new $(t,+Date.now())}function sn(t,n){return Object.keys(n).reduce((e,i)=>{let o=Number(i);return e[o]=Ge(t,n[o],o),e},{})}function Ge(t,n,e){return z(H({},n),{action:t(n.action,e)})}function cn(t,n){return n.map((e,i)=>({state:Ze(t,e.state,i),error:e.error}))}function Ze(t,n,e){return t(n,e)}function We(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function an(t,n,e,i){let o=[],a={},f=[];return t.stagedActionIds.forEach((p,g)=>{let r=t.actionsById[p];r&&(g&&Ft(t.computedStates[g],r,n,e,i)||(a[p]=r,o.push(p),f.push(t.computedStates[g])))}),z(H({},t),{stagedActionIds:o,actionsById:a,computedStates:f})}function Ft(t,n,e,i,o){let a=e&&!e(t,n.action),f=i&&!n.action.type.match(i.map(g=>Me(g)).join("|")),p=o&&n.action.type.match(o.map(g=>Me(g)).join("|"));return a||f||p}function Me(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ke(t){return{ngZone:t?G(ee):null,connectInZone:t}}var ut=(()=>{class t extends ot{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=te(t)))(o||t)}})()}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})(),rt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Lt=new V("@ngrx/store-devtools Redux Devtools Extension"),Xe=(()=>{class t{constructor(e,i,o){this.config=i,this.dispatcher=o,this.zoneConfig=Ke(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,i){if(this.devtoolsExtension)if(e.type===Y){if(i.isLocked||i.isPaused)return;let o=Ve(i);if(We(this.config)&&Ft(o,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let a=this.config.stateSanitizer?Ze(this.config.stateSanitizer,o,i.currentStateIndex):o,f=this.config.actionSanitizer?Ge(this.config.actionSanitizer,e,i.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(f,a))}else{let o=z(H({},i),{stagedActionIds:i.stagedActionIds,actionsById:this.config.actionSanitizer?sn(this.config.actionSanitizer,i.actionsById):i.actionsById,computedStates:this.config.stateSanitizer?cn(this.config.stateSanitizer,i.computedStates):i.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new St(e=>{let i=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=i,i.init(),i.subscribe(o=>e.next(o)),i.unsubscribe}):zt}createActionStreams(){let e=this.createChangesObservable().pipe(qt()),i=e.pipe(w(r=>r.type===rt.START)),o=e.pipe(w(r=>r.type===rt.STOP)),a=e.pipe(w(r=>r.type===rt.DISPATCH),N(r=>this.unwrapAction(r.payload)),Zt(r=>r.type===Pt?this.dispatcher.pipe(w(v=>v.type===bt),Vt(1e3),Q(1e3),N(()=>r),Gt(()=>vt(r)),Wt(1)):vt(r))),p=e.pipe(w(r=>r.type===rt.ACTION),N(r=>this.unwrapAction(r.payload))).pipe(tt(o)),g=a.pipe(tt(o));this.start$=i.pipe(tt(o)),this.actions$=this.start$.pipe(U(()=>p)),this.liftedActions$=this.start$.pipe(U(()=>g))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let i={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(i.maxAge=e.maxAge),i}sendToReduxDevtools(e){try{e()}catch(i){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",i)}}static{this.\u0275fac=function(i){return new(i||t)(x(Lt),x(at),x(ut))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})(),ct={type:yt},un="@ngrx/store-devtools/recompute",pn={type:un};function qe(t,n,e,i,o){if(i)return{state:e,error:"Interrupted by an error up the chain"};let a=e,f;try{a=t(e,n)}catch(p){f=p.toString(),o.handleError(p)}return{state:a,error:f}}function st(t,n,e,i,o,a,f,p,g){if(n>=t.length&&t.length===a.length)return t;let r=t.slice(0,n),v=a.length-(g?1:0);for(let s=n;s<v;s++){let l=a[s],b=o[l].action,u=r[s-1],c=u?u.state:i,C=u?u.error:void 0,T=f.indexOf(l)>-1?u:qe(e,b,c,C,p);r.push(T)}return g&&r.push(t[t.length-1]),r}function ln(t,n){return{monitorState:n(void 0,{}),nextActionId:1,actionsById:{0:J(ct)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function mn(t,n,e,i,o={}){return a=>(f,p)=>{let{monitorState:g,actionsById:r,nextActionId:v,stagedActionIds:s,skippedActionIds:l,committedState:b,currentStateIndex:u,computedStates:c,isLocked:C,isPaused:A}=f||n;f||(r=Object.create(r));function T(h){let d=h,k=s.slice(1,d+1);for(let E=0;E<k.length;E++)if(c[E+1].error){d=E,k=s.slice(1,d+1);break}else delete r[k[E]];l=l.filter(E=>k.indexOf(E)===-1),s=[0,...s.slice(d+1)],b=c[d].state,c=c.slice(d),u=u>d?u-d:0}function O(){r={0:J(ct)},v=1,s=[0],l=[],b=c[u].state,u=0,c=[]}let m=0;switch(p.type){case He:{C=p.status,m=1/0;break}case ze:{A=p.status,A?(s=[...s,v],r[v]=new $({type:"@ngrx/devtools/pause"},+Date.now()),v++,m=s.length-1,c=c.concat(c[c.length-1]),u===s.length-2&&u++,m=1/0):O();break}case De:{r={0:J(ct)},v=1,s=[0],l=[],b=t,u=0,c=[];break}case Le:{O();break}case je:{r={0:J(ct)},v=1,s=[0],l=[],u=0,c=[];break}case Fe:{let{id:h}=p;l.indexOf(h)===-1?l=[h,...l]:l=l.filter(k=>k!==h),m=s.indexOf(h);break}case nn:{let{start:h,end:d,active:k}=p,E=[];for(let gt=h;gt<d;gt++)E.push(gt);k?l=we(l,E):l=[...l,...E],m=s.indexOf(h);break}case $e:{u=p.index,m=1/0;break}case Be:{let h=s.indexOf(p.actionId);h!==-1&&(u=h),m=1/0;break}case Pe:{s=we(s,l),l=[],u=Math.min(u,s.length-1);break}case Y:{if(C)return f||n;if(A||f&&Ft(f.computedStates[u],p,o.predicate,o.actionsSafelist,o.actionsBlocklist)){let d=c[c.length-1];c=[...c.slice(0,-1),qe(a,p.action,d.state,d.error,e)],m=1/0;break}o.maxAge&&s.length===o.maxAge&&T(1),u===s.length-1&&u++;let h=v++;r[h]=p,s=[...s,h],m=s.length-1;break}case Pt:{({monitorState:g,actionsById:r,nextActionId:v,stagedActionIds:s,skippedActionIds:l,committedState:b,currentStateIndex:u,computedStates:c,isLocked:C,isPaused:A}=p.nextLiftedState);break}case yt:{m=0,o.maxAge&&s.length>o.maxAge&&(c=st(c,m,a,b,r,s,l,e,A),T(s.length-o.maxAge),m=1/0);break}case bt:{if(c.filter(d=>d.error).length>0)m=0,o.maxAge&&s.length>o.maxAge&&(c=st(c,m,a,b,r,s,l,e,A),T(s.length-o.maxAge),m=1/0);else{if(!A&&!C){u===s.length-1&&u++;let d=v++;r[d]=new $(p,+Date.now()),s=[...s,d],m=s.length-1,c=st(c,m,a,b,r,s,l,e,A)}c=c.map(d=>z(H({},d),{state:a(d.state,pn)})),u=s.length-1,o.maxAge&&s.length>o.maxAge&&T(s.length-o.maxAge),m=1/0}break}default:{m=1/0;break}}return c=st(c,m,a,b,r,s,l,e,A),g=i(g,p),{monitorState:g,actionsById:r,nextActionId:v,stagedActionIds:s,skippedActionIds:l,committedState:b,currentStateIndex:u,computedStates:c,isLocked:C,isPaused:A}}}var Ne=(()=>{class t{constructor(e,i,o,a,f,p,g,r){let v=ln(g,r.monitor),s=mn(g,v,p,r.monitor,r),l=It(It(i.asObservable().pipe(Jt(1)),a.actions$).pipe(N(J)),e,a.liftedActions$).pipe(Ut(Ht)),b=o.pipe(N(s)),u=Ke(r.connectInZone),c=new Bt(1);this.liftedStateSubscription=l.pipe(Yt(b),Re(u),Xt(({state:T},[O,m])=>{let h=m(T,O);return O.type!==Y&&We(r)&&(h=an(h,r.predicate,r.actionsSafelist,r.actionsBlocklist)),a.notify(O,h),{state:h,action:O}},{state:v,action:null})).subscribe(({state:T,action:O})=>{if(c.next(T),O.type===Y){let m=O.action;f.next(m)}}),this.extensionStartSubscription=a.start$.pipe(Re(u)).subscribe(()=>{this.refresh()});let C=c.asObservable(),A=C.pipe(N(Ve));Object.defineProperty(A,"state",{value:Se(A,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=C,this.state=A}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new $(e,+Date.now()))}refresh(){this.dispatch(new Ct)}reset(){this.dispatch(new Tt(+Date.now()))}rollback(){this.dispatch(new Ot(+Date.now()))}commit(){this.dispatch(new _t(+Date.now()))}sweep(){this.dispatch(new kt)}toggleAction(e){this.dispatch(new wt(e))}jumpToAction(e){this.dispatch(new Nt(e))}jumpToState(e){this.dispatch(new Mt(e))}importState(e){this.dispatch(new Rt(e))}lockChanges(e){this.dispatch(new Dt(e))}pauseRecording(e){this.dispatch(new jt(e))}static{this.\u0275fac=function(i){return new(i||t)(x(ut),x(ot),x(Ie),x(Xe),x(xe),x(ne),x(ve),x(at))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})();function Re({ngZone:t,connectInZone:n}){return e=>n?new St(i=>e.subscribe({next:o=>t.run(()=>i.next(o)),error:o=>t.run(()=>i.error(o)),complete:()=>t.run(()=>i.complete())})):e}var fn=new V("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function dn(t,n){return!!t||n.monitor!==Ue}function hn(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function gn(t={}){return Qt([Xe,ut,Ne,{provide:ke,useValue:t},{provide:fn,deps:[Lt,at],useFactory:dn},{provide:Lt,useFactory:hn},{provide:at,deps:[ke],useFactory:rn},{provide:ye,deps:[Ne],useFactory:Sn},{provide:Ae,useExisting:ut}])}function Sn(t){return t.state}var Je=(()=>{class t{static instrument(e={}){return{ngModule:t,providers:[gn(e)]}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=L({type:t})}static{this.\u0275inj=D({})}}return t})();var In=t=>["/books",t];function An(t,n){if(t&1&&(S(0,"li")(1,"a",6),y(2),S(3,"p",7),y(4),I()()()),t&2){let e=n.$implicit;_(),M("routerLink",ce(3,In,e.isbn)),_(),se(" ",e.title," "),_(2),re(e.subtitle)}}function xn(t,n){t&1&&(S(0,"li"),y(1,"No results"),I())}function yn(t,n){if(t&1&&(S(0,"ul",3),K(1,An,5,5,"li",4)(2,xn,2,0,"li",5),I()),t&2){let e=n.ngIf;_(),M("ngForOf",e),_(),M("ngIf",!e.length)}}var pt=class t{constructor(n){this.service=n;this.results$=this.input$.pipe(w(e=>e.length>=3),Q(500),Kt(),At(()=>this.isLoading=!0),U(e=>this.service.getAllSearch(e)),At(()=>this.isLoading=!1))}input$=new $t;isLoading=!1;results$;static \u0275fac=function(e){return new(e||t)(et(_e))};static \u0275cmp=j({type:t,selectors:[["bm-search"]],decls:4,vars:5,consts:[["searchInput",""],["type","search","autocomplete","off","aria-label","Search",3,"input"],["class","search-results",4,"ngIf"],[1,"search-results"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"routerLink"],["role","doc-subtitle"]],template:function(e,i){if(e&1){let o=X();S(0,"input",1,0),q("input",function(){Z(o);let f=oe(1);return W(i.input$.next(f.value))}),I(),K(2,yn,3,2,"ul",2),ae(3,"async")}e&2&&(ie("loading",i.isLoading),_(2),M("ngIf",ue(3,3,i.results$)))},dependencies:[le,it,P,me]})};var lt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=j({type:t,selectors:[["bm-home"]],decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(e,i){e&1&&(S(0,"h1"),y(1,"Home"),I(),S(2,"a",0),y(3,` Show book list
`),I(),S(4,"h2"),y(5,"Search"),I(),nt(6,"bm-search"))},dependencies:[P,pt]})};var tn=()=>{let t=G(F),n=G(Te);return t.isAuthenticated?!0:(window.alert("Not logged in!"),n.parseUrl("/home"))};var En=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:lt},{path:"books",loadChildren:()=>import("./chunk-DUCG7YZR.js").then(t=>t.BooksModule)},{path:"admin",loadChildren:()=>import("./chunk-Q6ASCMAR.js").then(t=>t.AdminModule),canActivate:[tn]}],mt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=L({type:t});static \u0275inj=D({imports:[Et.forRoot(En),Et]})};function Tn(t,n){if(t&1){let e=X();S(0,"button",6),q("click",function(){Z(e);let o=xt();return W(o.auth.login())}),y(1,"Login"),I()}}function On(t,n){if(t&1){let e=X();S(0,"button",7),q("click",function(){Z(e);let o=xt();return W(o.auth.logout())}),y(1,"Logout"),I()}}var ft=class t{constructor(n){this.auth=n}static \u0275fac=function(e){return new(e||t)(et(F))};static \u0275cmp=j({type:t,selectors:[["bm-root"]],decls:12,vars:2,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],["class","green",3,"click",4,"ngIf"],["class","red",3,"click",4,"ngIf"],[1,"green",3,"click"],[1,"red",3,"click"]],template:function(e,i){e&1&&(S(0,"nav")(1,"a",0),y(2,"Home"),I(),S(3,"a",1),y(4,"Books"),I(),S(5,"a",2),y(6,"Administration"),I(),S(7,"div",3),K(8,Tn,2,0,"button",4)(9,On,2,0,"button",5),I()(),S(10,"main"),nt(11,"router-outlet"),I()),e&2&&(_(8),M("ngIf",!i.auth.isAuthenticated),_(),M("ngIf",i.auth.isAuthenticated))},dependencies:[it,Ce,P,Oe]})};var dt=class t{constructor(n){this.authService=n}intercept(n,e){let i="1234567890";if(this.authService.isAuthenticated){let o=n.clone({setHeaders:{Authorization:`Bearer ${i}`}});return e.handle(o)}else return e.handle(n)}static \u0275fac=function(e){return new(e||t)(x(F))};static \u0275prov=R({token:t,factory:t.\u0275fac})};var ht=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=L({type:t,bootstrap:[ft]});static \u0275inj=D({providers:[{provide:fe,useClass:dt,multi:!0}],imports:[ge,mt,de,be.forRoot({},{}),Je.instrument({maxAge:25,logOnly:!pe()}),Ee.forRoot([])]})};he().bootstrapModule(ht,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
