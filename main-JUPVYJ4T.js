import{a as ve,d as yt,e as ot,f as Ie,g as Ae,h as xe,i as bt,j as ye,k as be,o as Ee,u as Ce,v as F}from"./chunk-QSKANV5A.js";import{$ as ne,$a as Oe,Aa as oe,Ba as y,C as Xt,Ca as re,D as qt,Da as se,E as Jt,F as U,G as tt,Ga as ce,H as At,Ha as ae,I as Yt,Ia as ue,Ka as pe,L as R,M as D,N as V,O as x,P as G,Pa as le,Qa as it,R as Qt,Ra as me,U as Z,Ua as fe,V as W,Va as de,W as te,Wa as he,Xa as ge,Ya as Se,_ as ee,_a as Te,a as H,ab as P,b as z,bb as _e,c as St,cb as Et,d as $t,da as _,db as ke,f as Bt,g as Ht,ga as et,h as zt,i as Ut,ia as j,ja as L,k as vt,l as Vt,m as N,na as K,p as It,q as w,qa as M,r as Gt,ra as ie,s as Zt,sa as S,t as Q,ta as I,u as Wt,ua as nt,x as Kt,xa as X,ya as q,za as xt}from"./chunk-6LPNVI26.js";var Y="PERFORM_ACTION",nn="REFRESH",je="RESET",Le="ROLLBACK",Pe="COMMIT",Fe="SWEEP",$e="TOGGLE_ACTION",on="SET_ACTIONS_ACTIVE",Be="JUMP_TO_STATE",He="JUMP_TO_ACTION",Pt="IMPORT_STATE",ze="LOCK_CHANGES",Ue="PAUSE_RECORDING",$=class{constructor(n,e){if(this.action=n,this.timestamp=e,this.type=Y,typeof n.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Ct=class{constructor(){this.type=nn}},Tt=class{constructor(n){this.timestamp=n,this.type=je}},Ot=class{constructor(n){this.timestamp=n,this.type=Le}},_t=class{constructor(n){this.timestamp=n,this.type=Pe}},kt=class{constructor(){this.type=Fe}},wt=class{constructor(n){this.id=n,this.type=$e}};var Mt=class{constructor(n){this.index=n,this.type=Be}},Nt=class{constructor(n){this.actionId=n,this.type=He}},Rt=class{constructor(n){this.nextLiftedState=n,this.type=Pt}},Dt=class{constructor(n){this.status=n,this.type=ze}},jt=class{constructor(n){this.status=n,this.type=Ue}};var at=new V("@ngrx/store-devtools Options"),we=new V("@ngrx/store-devtools Initial Config");function Ve(){return null}var rn="NgRx Store DevTools";function sn(t){let n={maxAge:!1,monitor:Ve,actionSanitizer:void 0,stateSanitizer:void 0,name:rn,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,i=e.logOnly?{pause:!0,export:!0,test:!0}:!1,o=e.features||i||n.features;o.import===!0&&(o.import="custom");let a=Object.assign({},n,{features:o},e);if(a.maxAge&&a.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${a.maxAge}`);return a}function Me(t,n){return t.filter(e=>n.indexOf(e)<0)}function Ge(t){let{computedStates:n,currentStateIndex:e}=t;if(e>=n.length){let{state:o}=n[n.length-1];return o}let{state:i}=n[e];return i}function J(t){return new $(t,+Date.now())}function cn(t,n){return Object.keys(n).reduce((e,i)=>{let o=Number(i);return e[o]=Ze(t,n[o],o),e},{})}function Ze(t,n,e){return z(H({},n),{action:t(n.action,e)})}function an(t,n){return n.map((e,i)=>({state:We(t,e.state,i),error:e.error}))}function We(t,n,e){return t(n,e)}function Ke(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function un(t,n,e,i){let o=[],a={},f=[];return t.stagedActionIds.forEach((p,g)=>{let r=t.actionsById[p];r&&(g&&Ft(t.computedStates[g],r,n,e,i)||(a[p]=r,o.push(p),f.push(t.computedStates[g])))}),z(H({},t),{stagedActionIds:o,actionsById:a,computedStates:f})}function Ft(t,n,e,i,o){let a=e&&!e(t,n.action),f=i&&!n.action.type.match(i.map(g=>Ne(g)).join("|")),p=o&&n.action.type.match(o.map(g=>Ne(g)).join("|"));return a||f||p}function Ne(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xe(t){return{ngZone:t?G(ee):null,connectInZone:t}}var ut=(()=>{class t extends ot{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=te(t)))(o||t)}})()}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})(),rt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Lt=new V("@ngrx/store-devtools Redux Devtools Extension"),qe=(()=>{class t{constructor(e,i,o){this.config=i,this.dispatcher=o,this.zoneConfig=Xe(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,i){if(this.devtoolsExtension)if(e.type===Y){if(i.isLocked||i.isPaused)return;let o=Ge(i);if(Ke(this.config)&&Ft(o,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let a=this.config.stateSanitizer?We(this.config.stateSanitizer,o,i.currentStateIndex):o,f=this.config.actionSanitizer?Ze(this.config.actionSanitizer,e,i.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(f,a))}else{let o=z(H({},i),{stagedActionIds:i.stagedActionIds,actionsById:this.config.actionSanitizer?cn(this.config.actionSanitizer,i.actionsById):i.actionsById,computedStates:this.config.stateSanitizer?an(this.config.stateSanitizer,i.computedStates):i.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new St(e=>{let i=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=i,i.init(),i.subscribe(o=>e.next(o)),i.unsubscribe}):zt}createActionStreams(){let e=this.createChangesObservable().pipe(qt()),i=e.pipe(w(r=>r.type===rt.START)),o=e.pipe(w(r=>r.type===rt.STOP)),a=e.pipe(w(r=>r.type===rt.DISPATCH),N(r=>this.unwrapAction(r.payload)),Zt(r=>r.type===Pt?this.dispatcher.pipe(w(v=>v.type===bt),Vt(1e3),Q(1e3),N(()=>r),Gt(()=>vt(r)),Wt(1)):vt(r))),p=e.pipe(w(r=>r.type===rt.ACTION),N(r=>this.unwrapAction(r.payload))).pipe(tt(o)),g=a.pipe(tt(o));this.start$=i.pipe(tt(o)),this.actions$=this.start$.pipe(U(()=>p)),this.liftedActions$=this.start$.pipe(U(()=>g))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let i={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(i.maxAge=e.maxAge),i}sendToReduxDevtools(e){try{e()}catch(i){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",i)}}static{this.\u0275fac=function(i){return new(i||t)(x(Lt),x(at),x(ut))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})(),ct={type:yt},pn="@ngrx/store-devtools/recompute",ln={type:pn};function Je(t,n,e,i,o){if(i)return{state:e,error:"Interrupted by an error up the chain"};let a=e,f;try{a=t(e,n)}catch(p){f=p.toString(),o.handleError(p)}return{state:a,error:f}}function st(t,n,e,i,o,a,f,p,g){if(n>=t.length&&t.length===a.length)return t;let r=t.slice(0,n),v=a.length-(g?1:0);for(let s=n;s<v;s++){let l=a[s],b=o[l].action,u=r[s-1],c=u?u.state:i,C=u?u.error:void 0,T=f.indexOf(l)>-1?u:Je(e,b,c,C,p);r.push(T)}return g&&r.push(t[t.length-1]),r}function mn(t,n){return{monitorState:n(void 0,{}),nextActionId:1,actionsById:{0:J(ct)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function fn(t,n,e,i,o={}){return a=>(f,p)=>{let{monitorState:g,actionsById:r,nextActionId:v,stagedActionIds:s,skippedActionIds:l,committedState:b,currentStateIndex:u,computedStates:c,isLocked:C,isPaused:A}=f||n;f||(r=Object.create(r));function T(h){let d=h,k=s.slice(1,d+1);for(let E=0;E<k.length;E++)if(c[E+1].error){d=E,k=s.slice(1,d+1);break}else delete r[k[E]];l=l.filter(E=>k.indexOf(E)===-1),s=[0,...s.slice(d+1)],b=c[d].state,c=c.slice(d),u=u>d?u-d:0}function O(){r={0:J(ct)},v=1,s=[0],l=[],b=c[u].state,u=0,c=[]}let m=0;switch(p.type){case ze:{C=p.status,m=1/0;break}case Ue:{A=p.status,A?(s=[...s,v],r[v]=new $({type:"@ngrx/devtools/pause"},+Date.now()),v++,m=s.length-1,c=c.concat(c[c.length-1]),u===s.length-2&&u++,m=1/0):O();break}case je:{r={0:J(ct)},v=1,s=[0],l=[],b=t,u=0,c=[];break}case Pe:{O();break}case Le:{r={0:J(ct)},v=1,s=[0],l=[],u=0,c=[];break}case $e:{let{id:h}=p;l.indexOf(h)===-1?l=[h,...l]:l=l.filter(k=>k!==h),m=s.indexOf(h);break}case on:{let{start:h,end:d,active:k}=p,E=[];for(let gt=h;gt<d;gt++)E.push(gt);k?l=Me(l,E):l=[...l,...E],m=s.indexOf(h);break}case Be:{u=p.index,m=1/0;break}case He:{let h=s.indexOf(p.actionId);h!==-1&&(u=h),m=1/0;break}case Fe:{s=Me(s,l),l=[],u=Math.min(u,s.length-1);break}case Y:{if(C)return f||n;if(A||f&&Ft(f.computedStates[u],p,o.predicate,o.actionsSafelist,o.actionsBlocklist)){let d=c[c.length-1];c=[...c.slice(0,-1),Je(a,p.action,d.state,d.error,e)],m=1/0;break}o.maxAge&&s.length===o.maxAge&&T(1),u===s.length-1&&u++;let h=v++;r[h]=p,s=[...s,h],m=s.length-1;break}case Pt:{({monitorState:g,actionsById:r,nextActionId:v,stagedActionIds:s,skippedActionIds:l,committedState:b,currentStateIndex:u,computedStates:c,isLocked:C,isPaused:A}=p.nextLiftedState);break}case yt:{m=0,o.maxAge&&s.length>o.maxAge&&(c=st(c,m,a,b,r,s,l,e,A),T(s.length-o.maxAge),m=1/0);break}case bt:{if(c.filter(d=>d.error).length>0)m=0,o.maxAge&&s.length>o.maxAge&&(c=st(c,m,a,b,r,s,l,e,A),T(s.length-o.maxAge),m=1/0);else{if(!A&&!C){u===s.length-1&&u++;let d=v++;r[d]=new $(p,+Date.now()),s=[...s,d],m=s.length-1,c=st(c,m,a,b,r,s,l,e,A)}c=c.map(d=>z(H({},d),{state:a(d.state,ln)})),u=s.length-1,o.maxAge&&s.length>o.maxAge&&T(s.length-o.maxAge),m=1/0}break}default:{m=1/0;break}}return c=st(c,m,a,b,r,s,l,e,A),g=i(g,p),{monitorState:g,actionsById:r,nextActionId:v,stagedActionIds:s,skippedActionIds:l,committedState:b,currentStateIndex:u,computedStates:c,isLocked:C,isPaused:A}}}var Re=(()=>{class t{constructor(e,i,o,a,f,p,g,r){let v=mn(g,r.monitor),s=fn(g,v,p,r.monitor,r),l=It(It(i.asObservable().pipe(Jt(1)),a.actions$).pipe(N(J)),e,a.liftedActions$).pipe(Ut(Ht)),b=o.pipe(N(s)),u=Xe(r.connectInZone),c=new Bt(1);this.liftedStateSubscription=l.pipe(Yt(b),De(u),Xt(({state:T},[O,m])=>{let h=m(T,O);return O.type!==Y&&Ke(r)&&(h=un(h,r.predicate,r.actionsSafelist,r.actionsBlocklist)),a.notify(O,h),{state:h,action:O}},{state:v,action:null})).subscribe(({state:T,action:O})=>{if(c.next(T),O.type===Y){let m=O.action;f.next(m)}}),this.extensionStartSubscription=a.start$.pipe(De(u)).subscribe(()=>{this.refresh()});let C=c.asObservable(),A=C.pipe(N(Ge));Object.defineProperty(A,"state",{value:ve(A,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=C,this.state=A}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new $(e,+Date.now()))}refresh(){this.dispatch(new Ct)}reset(){this.dispatch(new Tt(+Date.now()))}rollback(){this.dispatch(new Ot(+Date.now()))}commit(){this.dispatch(new _t(+Date.now()))}sweep(){this.dispatch(new kt)}toggleAction(e){this.dispatch(new wt(e))}jumpToAction(e){this.dispatch(new Nt(e))}jumpToState(e){this.dispatch(new Mt(e))}importState(e){this.dispatch(new Rt(e))}lockChanges(e){this.dispatch(new Dt(e))}pauseRecording(e){this.dispatch(new jt(e))}static{this.\u0275fac=function(i){return new(i||t)(x(ut),x(ot),x(Ae),x(qe),x(ye),x(ne),x(Ie),x(at))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac})}}return t})();function De({ngZone:t,connectInZone:n}){return e=>n?new St(i=>e.subscribe({next:o=>t.run(()=>i.next(o)),error:o=>t.run(()=>i.error(o)),complete:()=>t.run(()=>i.complete())})):e}var dn=new V("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function hn(t,n){return!!t||n.monitor!==Ve}function gn(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function Sn(t){return t.state}function vn(t={}){return Qt([qe,ut,Re,{provide:we,useValue:t},{provide:dn,deps:[Lt,at],useFactory:hn},{provide:Lt,useFactory:gn},{provide:at,deps:[we],useFactory:sn},{provide:be,deps:[Re],useFactory:Sn},{provide:xe,useExisting:ut}])}var Ye=(()=>{class t{static instrument(e={}){return{ngModule:t,providers:[vn(e)]}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=L({type:t})}static{this.\u0275inj=D({})}}return t})();var An=t=>["/books",t];function xn(t,n){if(t&1&&(S(0,"li")(1,"a",6),y(2),S(3,"p",7),y(4),I()()()),t&2){let e=n.$implicit;_(),M("routerLink",ce(3,An,e.isbn)),_(),se(" ",e.title," "),_(2),re(e.subtitle)}}function yn(t,n){t&1&&(S(0,"li"),y(1,"No results"),I())}function bn(t,n){if(t&1&&(S(0,"ul",3),K(1,xn,5,5,"li",4)(2,yn,2,0,"li",5),I()),t&2){let e=n.ngIf;_(),M("ngForOf",e),_(),M("ngIf",!e.length)}}var pt=class t{constructor(n){this.service=n;this.results$=this.input$.pipe(w(e=>e.length>=3),Q(500),Kt(),At(()=>this.isLoading=!0),U(e=>this.service.getAllSearch(e)),At(()=>this.isLoading=!1))}input$=new $t;isLoading=!1;results$;static \u0275fac=function(e){return new(e||t)(et(ke))};static \u0275cmp=j({type:t,selectors:[["bm-search"]],standalone:!1,decls:4,vars:5,consts:[["searchInput",""],["type","search","autocomplete","off","aria-label","Search",3,"input"],["class","search-results",4,"ngIf"],[1,"search-results"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"routerLink"],["role","doc-subtitle"]],template:function(e,i){if(e&1){let o=X();S(0,"input",1,0),q("input",function(){Z(o);let f=oe(1);return W(i.input$.next(f.value))}),I(),K(2,bn,3,2,"ul",2),ae(3,"async")}e&2&&(ie("loading",i.isLoading),_(2),M("ngIf",ue(3,3,i.results$)))},dependencies:[le,it,P,me],encapsulation:2})};var lt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=j({type:t,selectors:[["bm-home"]],standalone:!1,decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(e,i){e&1&&(S(0,"h1"),y(1,"Home"),I(),S(2,"a",0),y(3,` Show book list
`),I(),S(4,"h2"),y(5,"Search"),I(),nt(6,"bm-search"))},dependencies:[P,pt],encapsulation:2})};var en=()=>{let t=G(F),n=G(Oe);return t.isAuthenticated?!0:(window.alert("Not logged in!"),n.parseUrl("/home"))};var Cn=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:lt},{path:"books",loadChildren:()=>import("./chunk-D3IJ6C5A.js").then(t=>t.BooksModule)},{path:"admin",loadChildren:()=>import("./chunk-FM34IWSM.js").then(t=>t.AdminModule),canActivate:[en]}],mt=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=L({type:t});static \u0275inj=D({imports:[Et.forRoot(Cn),Et]})};function On(t,n){if(t&1){let e=X();S(0,"button",6),q("click",function(){Z(e);let o=xt();return W(o.auth.login())}),y(1,"Login"),I()}}function _n(t,n){if(t&1){let e=X();S(0,"button",7),q("click",function(){Z(e);let o=xt();return W(o.auth.logout())}),y(1,"Logout"),I()}}var ft=class t{constructor(n){this.auth=n}static \u0275fac=function(e){return new(e||t)(et(F))};static \u0275cmp=j({type:t,selectors:[["bm-root"]],standalone:!1,decls:12,vars:2,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],["class","green",3,"click",4,"ngIf"],["class","red",3,"click",4,"ngIf"],[1,"green",3,"click"],[1,"red",3,"click"]],template:function(e,i){e&1&&(S(0,"nav")(1,"a",0),y(2,"Home"),I(),S(3,"a",1),y(4,"Books"),I(),S(5,"a",2),y(6,"Administration"),I(),S(7,"div",3),K(8,On,2,0,"button",4)(9,_n,2,0,"button",5),I()(),S(10,"main"),nt(11,"router-outlet"),I()),e&2&&(_(8),M("ngIf",!i.auth.isAuthenticated),_(),M("ngIf",i.auth.isAuthenticated))},dependencies:[it,Te,P,_e],encapsulation:2})};var dt=class t{constructor(n){this.authService=n}intercept(n,e){let i="1234567890";if(this.authService.isAuthenticated){let o=n.clone({setHeaders:{Authorization:`Bearer ${i}`}});return e.handle(o)}else return e.handle(n)}static \u0275fac=function(e){return new(e||t)(x(F))};static \u0275prov=R({token:t,factory:t.\u0275fac})};var ht=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=L({type:t,bootstrap:[ft]});static \u0275inj=D({providers:[de(he()),{provide:fe,useClass:dt,multi:!0}],imports:[Se,mt,Ee.forRoot({},{}),Ye.instrument({maxAge:25,logOnly:!pe()}),Ce.forRoot([])]})};ge().bootstrapModule(ht,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
