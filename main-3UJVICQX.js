import{a as pe,d as gt,e as ot,f as fe,g as de,h as me,i as St,j as he,k as ge,o as Se,u as xe,v as $}from"./chunk-JT6RYYNA.js";import{$a as Ee,Aa as E,Ba as Qt,C as Vt,Ca as te,D as Ht,E as Gt,F as V,Fa as ee,G as tt,Ga as ne,H as mt,Ha as ie,I as Wt,Ka as oe,L as D,M as R,Ma as re,N as H,Na as it,O as I,Oa as se,P as G,Q as j,R as L,Ra as ce,Sa as ae,Ta as ue,Ua as le,V as W,W as Z,Wa as ve,X as Zt,Xa as ye,Ya as P,Z as Kt,Za as Ie,_a as xt,a as B,b as U,c as pt,d as Dt,ea as Xt,f as Rt,fa as C,g as jt,ga as et,h as Lt,i as Pt,ja as qt,k as ft,l as $t,m as M,ma as _,na as Jt,p as dt,pa as K,q as k,qa as x,r as Ft,ra as v,s as zt,sa as nt,t as Q,u as Bt,va as X,x as Ut,xa as q,ya as ht,za as Yt}from"./chunk-USVYWTSC.js";var Y="PERFORM_ACTION",on="REFRESH",_e="RESET",Me="ROLLBACK",Ne="COMMIT",De="SWEEP",Re="TOGGLE_ACTION",je="SET_ACTIONS_ACTIVE",Le="JUMP_TO_STATE",Pe="JUMP_TO_ACTION",Mt="IMPORT_STATE",$e="LOCK_CHANGES",Fe="PAUSE_RECORDING",F=class{constructor(t,o){if(this.action=t,this.timestamp=o,this.type=Y,typeof t.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},vt=class{constructor(){this.type=on}},yt=class{constructor(t){this.timestamp=t,this.type=_e}},It=class{constructor(t){this.timestamp=t,this.type=Me}},Et=class{constructor(t){this.timestamp=t,this.type=Ne}},At=class{constructor(){this.type=De}},bt=class{constructor(t){this.id=t,this.type=Re}},Ae=class{constructor(t,o,i=!0){this.start=t,this.end=o,this.active=i,this.type=je}},Tt=class{constructor(t){this.index=t,this.type=Le}},Ot=class{constructor(t){this.actionId=t,this.type=Pe}},Ct=class{constructor(t){this.nextLiftedState=t,this.type=Mt}},wt=class{constructor(t){this.status=t,this.type=$e}},kt=class{constructor(t){this.status=t,this.type=Fe}},be=class{constructor(){this.maxAge=!1}},at=new H("@ngrx/store-devtools Options"),Te=new H("@ngrx/store-devtools Initial Config");function ze(){return null}var rn="NgRx Store DevTools";function sn(e){let t={maxAge:!1,monitor:ze,actionSanitizer:void 0,stateSanitizer:void 0,name:rn,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},o=typeof e=="function"?e():e,i=o.logOnly?{pause:!0,export:!0,test:!0}:!1,n=o.features||i||t.features;n.import===!0&&(n.import="custom");let c=Object.assign({},t,{features:n},o);if(c.maxAge&&c.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${c.maxAge}`);return c}function Oe(e,t){return e.filter(o=>t.indexOf(o)<0)}function Be(e){let{computedStates:t,currentStateIndex:o}=e;if(o>=t.length){let{state:n}=t[t.length-1];return n}let{state:i}=t[o];return i}function $n(e){return e.actionsById[e.nextActionId-1]}function J(e){return new F(e,+Date.now())}function cn(e,t){return Object.keys(t).reduce((o,i)=>{let n=Number(i);return o[n]=Ue(e,t[n],n),o},{})}function Ue(e,t,o){return U(B({},t),{action:e(t.action,o)})}function an(e,t){return t.map((o,i)=>({state:Ve(e,o.state,i),error:o.error}))}function Ve(e,t,o){return e(t,o)}function He(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function un(e,t,o,i){let n=[],c={},m=[];return e.stagedActionIds.forEach((s,h)=>{let p=e.actionsById[s];p&&(h&&Nt(e.computedStates[h],p,t,o,i)||(c[s]=p,n.push(s),m.push(e.computedStates[h])))}),U(B({},e),{stagedActionIds:n,actionsById:c,computedStates:m})}function Nt(e,t,o,i,n){let c=o&&!o(e,t.action),m=i&&!t.action.type.match(i.map(h=>Ce(h)).join("|")),s=n&&t.action.type.match(n.map(h=>Ce(h)).join("|"));return c||m||s}function Ce(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ge(e){return{ngZone:e?G(qt):null,connectInZone:e}}var ut=(()=>{let t=class t extends ot{};t.\u0275fac=(()=>{let i;return function(c){return(i||(i=Zt(t)))(c||t)}})(),t.\u0275prov=D({token:t,factory:t.\u0275fac});let e=t;return e})(),rt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},_t=new H("@ngrx/store-devtools Redux Devtools Extension"),We=(()=>{let _DevtoolsExtension=class _DevtoolsExtension{constructor(e,t,o){this.config=t,this.dispatcher=o,this.zoneConfig=Ge(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,t){if(this.devtoolsExtension)if(e.type===Y){if(t.isLocked||t.isPaused)return;let o=Be(t);if(He(this.config)&&Nt(o,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let i=this.config.stateSanitizer?Ve(this.config.stateSanitizer,o,t.currentStateIndex):o,n=this.config.actionSanitizer?Ue(this.config.actionSanitizer,e,t.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(n,i))}else{let o=U(B({},t),{stagedActionIds:t.stagedActionIds,actionsById:this.config.actionSanitizer?cn(this.config.actionSanitizer,t.actionsById):t.actionsById,computedStates:this.config.stateSanitizer?an(this.config.stateSanitizer,t.computedStates):t.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new pt(e=>{let t=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=t,t.init(),t.subscribe(o=>e.next(o)),t.unsubscribe}):Lt}createActionStreams(){let e=this.createChangesObservable().pipe(Ht()),t=e.pipe(k(s=>s.type===rt.START)),o=e.pipe(k(s=>s.type===rt.STOP)),i=e.pipe(k(s=>s.type===rt.DISPATCH),M(s=>this.unwrapAction(s.payload)),zt(s=>s.type===Mt?this.dispatcher.pipe(k(h=>h.type===St),$t(1e3),Q(1e3),M(()=>s),Ft(()=>ft(s)),Bt(1)):ft(s))),c=e.pipe(k(s=>s.type===rt.ACTION),M(s=>this.unwrapAction(s.payload))).pipe(tt(o)),m=i.pipe(tt(o));this.start$=t.pipe(tt(o)),this.actions$=this.start$.pipe(V(()=>c)),this.liftedActions$=this.start$.pipe(V(()=>m))}unwrapAction(action){return typeof action=="string"?eval(`(${action})`):action}getExtensionConfig(e){let t={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(t.maxAge=e.maxAge),t}sendToReduxDevtools(e){try{e()}catch(t){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",t)}}};_DevtoolsExtension.\u0275fac=function(t){return new(t||_DevtoolsExtension)(I(_t),I(at),I(ut))},_DevtoolsExtension.\u0275prov=D({token:_DevtoolsExtension,factory:_DevtoolsExtension.\u0275fac});let DevtoolsExtension=_DevtoolsExtension;return DevtoolsExtension})(),ct={type:gt},ln="@ngrx/store-devtools/recompute",pn={type:ln};function Ze(e,t,o,i,n){if(i)return{state:o,error:"Interrupted by an error up the chain"};let c=o,m;try{c=e(o,t)}catch(s){m=s.toString(),n.handleError(s)}return{state:c,error:m}}function st(e,t,o,i,n,c,m,s,h){if(t>=e.length&&e.length===c.length)return e;let p=e.slice(0,t),g=c.length-(h?1:0);for(let r=t;r<g;r++){let f=c[r],A=n[f].action,u=p[r-1],a=u?u.state:i,T=u?u.error:void 0,O=m.indexOf(f)>-1?u:Ze(o,A,a,T,s);p.push(O)}return h&&p.push(e[e.length-1]),p}function fn(e,t){return{monitorState:t(void 0,{}),nextActionId:1,actionsById:{0:J(ct)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function dn(e,t,o,i,n={}){return c=>(m,s)=>{let{monitorState:h,actionsById:p,nextActionId:g,stagedActionIds:r,skippedActionIds:f,committedState:A,currentStateIndex:u,computedStates:a,isLocked:T,isPaused:y}=m||t;m||(p=Object.create(p));function O(S){let d=S,w=r.slice(1,d+1);for(let b=0;b<w.length;b++)if(a[b+1].error){d=b,w=r.slice(1,d+1);break}else delete p[w[b]];f=f.filter(b=>w.indexOf(b)===-1),r=[0,...r.slice(d+1)],A=a[d].state,a=a.slice(d),u=u>d?u-d:0}function N(){p={0:J(ct)},g=1,r=[0],f=[],A=a[u].state,u=0,a=[]}let l=0;switch(s.type){case $e:{T=s.status,l=1/0;break}case Fe:{y=s.status,y?(r=[...r,g],p[g]=new F({type:"@ngrx/devtools/pause"},+Date.now()),g++,l=r.length-1,a=a.concat(a[a.length-1]),u===r.length-2&&u++,l=1/0):N();break}case _e:{p={0:J(ct)},g=1,r=[0],f=[],A=e,u=0,a=[];break}case Ne:{N();break}case Me:{p={0:J(ct)},g=1,r=[0],f=[],u=0,a=[];break}case Re:{let{id:S}=s;f.indexOf(S)===-1?f=[S,...f]:f=f.filter(w=>w!==S),l=r.indexOf(S);break}case je:{let{start:S,end:d,active:w}=s,b=[];for(let lt=S;lt<d;lt++)b.push(lt);w?f=Oe(f,b):f=[...f,...b],l=r.indexOf(S);break}case Le:{u=s.index,l=1/0;break}case Pe:{let S=r.indexOf(s.actionId);S!==-1&&(u=S),l=1/0;break}case De:{r=Oe(r,f),f=[],u=Math.min(u,r.length-1);break}case Y:{if(T)return m||t;if(y||m&&Nt(m.computedStates[u],s,n.predicate,n.actionsSafelist,n.actionsBlocklist)){let d=a[a.length-1];a=[...a.slice(0,-1),Ze(c,s.action,d.state,d.error,o)],l=1/0;break}n.maxAge&&r.length===n.maxAge&&O(1),u===r.length-1&&u++;let S=g++;p[S]=s,r=[...r,S],l=r.length-1;break}case Mt:{({monitorState:h,actionsById:p,nextActionId:g,stagedActionIds:r,skippedActionIds:f,committedState:A,currentStateIndex:u,computedStates:a,isLocked:T,isPaused:y}=s.nextLiftedState);break}case gt:{l=0,n.maxAge&&r.length>n.maxAge&&(a=st(a,l,c,A,p,r,f,o,y),O(r.length-n.maxAge),l=1/0);break}case St:{if(a.filter(d=>d.error).length>0)l=0,n.maxAge&&r.length>n.maxAge&&(a=st(a,l,c,A,p,r,f,o,y),O(r.length-n.maxAge),l=1/0);else{if(!y&&!T){u===r.length-1&&u++;let d=g++;p[d]=new F(s,+Date.now()),r=[...r,d],l=r.length-1,a=st(a,l,c,A,p,r,f,o,y)}a=a.map(d=>U(B({},d),{state:c(d.state,pn)})),u=r.length-1,n.maxAge&&r.length>n.maxAge&&O(r.length-n.maxAge),l=1/0}break}default:{l=1/0;break}}return a=st(a,l,c,A,p,r,f,o,y),h=i(h,s),{monitorState:h,actionsById:p,nextActionId:g,stagedActionIds:r,skippedActionIds:f,committedState:A,currentStateIndex:u,computedStates:a,isLocked:T,isPaused:y}}}var we=(()=>{let t=class t{constructor(i,n,c,m,s,h,p,g){let r=fn(p,g.monitor),f=dn(p,r,h,g.monitor,g),A=dt(dt(n.asObservable().pipe(Gt(1)),m.actions$).pipe(M(J)),i,m.liftedActions$).pipe(Pt(jt)),u=c.pipe(M(f)),a=Ge(g.connectInZone),T=new Rt(1);this.liftedStateSubscription=A.pipe(Wt(u),ke(a),Vt(({state:N},[l,S])=>{let d=S(N,l);return l.type!==Y&&He(g)&&(d=un(d,g.predicate,g.actionsSafelist,g.actionsBlocklist)),m.notify(l,d),{state:d,action:l}},{state:r,action:null})).subscribe(({state:N,action:l})=>{if(T.next(N),l.type===Y){let S=l.action;s.next(S)}}),this.extensionStartSubscription=m.start$.pipe(ke(a)).subscribe(()=>{this.refresh()});let y=T.asObservable(),O=y.pipe(M(Be));Object.defineProperty(O,"state",{value:pe(O,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=i,this.liftedState=y,this.state=O}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(i){this.dispatcher.next(i)}next(i){this.dispatcher.next(i)}error(i){}complete(){}performAction(i){this.dispatch(new F(i,+Date.now()))}refresh(){this.dispatch(new vt)}reset(){this.dispatch(new yt(+Date.now()))}rollback(){this.dispatch(new It(+Date.now()))}commit(){this.dispatch(new Et(+Date.now()))}sweep(){this.dispatch(new At)}toggleAction(i){this.dispatch(new bt(i))}jumpToAction(i){this.dispatch(new Ot(i))}jumpToState(i){this.dispatch(new Tt(i))}importState(i){this.dispatch(new Ct(i))}lockChanges(i){this.dispatch(new wt(i))}pauseRecording(i){this.dispatch(new kt(i))}};t.\u0275fac=function(n){return new(n||t)(I(ut),I(ot),I(de),I(We),I(he),I(Xt),I(fe),I(at))},t.\u0275prov=D({token:t,factory:t.\u0275fac});let e=t;return e})();function ke({ngZone:e,connectInZone:t}){return o=>t?new pt(i=>o.subscribe({next:n=>e.run(()=>i.next(n)),error:n=>e.run(()=>i.error(n)),complete:()=>e.run(()=>i.complete())})):o}var mn=new H("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function hn(e,t){return!!e||t.monitor!==ze}function gn(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function Sn(e={}){return Kt([We,ut,we,{provide:Te,useValue:e},{provide:mn,deps:[_t,at],useFactory:hn},{provide:_t,useFactory:gn},{provide:at,deps:[Te],useFactory:sn},{provide:ge,deps:[we],useFactory:xn},{provide:me,useExisting:ut}])}function xn(e){return e.state}var Ke=(()=>{let t=class t{static instrument(i={}){return{ngModule:t,providers:[Sn(i)]}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=L({type:t}),t.\u0275inj=R({});let e=t;return e})();var yn=e=>["/books",e];function In(e,t){if(e&1&&(x(0,"li")(1,"a",6),E(2),x(3,"p",7),E(4),v()()()),e&2){let o=t.$implicit;C(1),_("routerLink",ee(3,yn,o.isbn)),C(1),te(" ",o.title," "),C(2),Qt(o.subtitle)}}function En(e,t){e&1&&(x(0,"li"),E(1,"No results"),v())}function An(e,t){if(e&1&&(x(0,"ul",3),K(1,In,5,5,"li",4)(2,En,2,0,"li",5),v()),e&2){let o=t.ngIf;C(1),_("ngForOf",o),C(1),_("ngIf",!o.length)}}var qe=(()=>{let t=class t{constructor(i){this.service=i,this.input$=new Dt,this.isLoading=!1,this.results$=this.input$.pipe(k(n=>n.length>=3),Q(500),Ut(),mt(()=>this.isLoading=!0),V(n=>this.service.getAllSearch(n)),mt(()=>this.isLoading=!1))}};t.\u0275fac=function(n){return new(n||t)(et(Ee))},t.\u0275cmp=j({type:t,selectors:[["bm-search"]],decls:4,vars:5,consts:[["type","search","autocomplete","off","aria-label","Search",3,"input"],["searchInput",""],["class","search-results",4,"ngIf"],[1,"search-results"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"routerLink"],["role","doc-subtitle"]],template:function(n,c){if(n&1){let m=X();x(0,"input",0,1),q("input",function(){W(m);let h=Yt(1);return Z(c.input$.next(h.value))}),v(),K(2,An,3,2,"ul",2),ne(3,"async")}n&2&&(Jt("loading",c.isLoading),C(2),_("ngIf",ie(3,3,c.results$)))},dependencies:[re,it,P,se]});let e=t;return e})();var Je=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=j({type:t,selectors:[["bm-home"]],decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(n,c){n&1&&(x(0,"h1"),E(1,"Home"),v(),x(2,"a",0),E(3,` Show book list
`),v(),x(4,"h2"),E(5,"Search"),v(),nt(6,"bm-search"))},dependencies:[P,qe]});let e=t;return e})();var Ye=()=>{let e=G($),t=G(ye);return e.isAuthenticated?!0:(window.alert("Not logged in!"),t.parseUrl("/home"))};var Tn=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Je},{path:"books",loadChildren:()=>import("./chunk-YKJEBRIT.js").then(e=>e.BooksModule)},{path:"admin",loadChildren:()=>import("./chunk-TI7KQV7Y.js").then(e=>e.AdminModule),canActivate:[Ye]}],Qe=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=L({type:t}),t.\u0275inj=R({imports:[xt.forRoot(Tn),xt]});let e=t;return e})();function Cn(e,t){if(e&1){let o=X();x(0,"button",6),q("click",function(){W(o);let n=ht();return Z(n.auth.login())}),E(1,"Login"),v()}}function wn(e,t){if(e&1){let o=X();x(0,"button",7),q("click",function(){W(o);let n=ht();return Z(n.auth.logout())}),E(1,"Logout"),v()}}var tn=(()=>{let t=class t{constructor(i){this.auth=i}};t.\u0275fac=function(n){return new(n||t)(et($))},t.\u0275cmp=j({type:t,selectors:[["bm-root"]],decls:12,vars:2,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],["class","green",3,"click",4,"ngIf"],["class","red",3,"click",4,"ngIf"],[1,"green",3,"click"],[1,"red",3,"click"]],template:function(n,c){n&1&&(x(0,"nav")(1,"a",0),E(2,"Home"),v(),x(3,"a",1),E(4,"Books"),v(),x(5,"a",2),E(6,"Administration"),v(),x(7,"div",3),K(8,Cn,2,0,"button",4)(9,wn,2,0,"button",5),v()(),x(10,"main"),nt(11,"router-outlet"),v()),n&2&&(C(8),_("ngIf",!c.auth.isAuthenticated),C(1),_("ngIf",c.auth.isAuthenticated))},dependencies:[it,ve,P,Ie]});let e=t;return e})();var en=(()=>{let t=class t{constructor(i){this.authService=i}intercept(i,n){let c="1234567890";if(this.authService.isAuthenticated){let m=i.clone({setHeaders:{Authorization:`Bearer ${c}`}});return n.handle(m)}else return n.handle(i)}};t.\u0275fac=function(n){return new(n||t)(I($))},t.\u0275prov=D({token:t,factory:t.\u0275fac});let e=t;return e})();var nn=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=L({type:t,bootstrap:[tn]}),t.\u0275inj=R({providers:[{provide:ce,useClass:en,multi:!0}],imports:[le,Qe,ae,Se.forRoot({},{}),Ke.instrument({maxAge:25,logOnly:!oe()}),xe.forRoot([])]});let e=t;return e})();ue().bootstrapModule(nn).catch(e=>console.error(e));
