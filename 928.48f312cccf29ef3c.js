"use strict";(self.webpackChunkbook_monkey=self.webpackChunkbook_monkey||[]).push([[928],{9928:(to,p,e)=>{e.r(p),e.d(p,{BooksModule:()=>W});var l=e(6895),a=e(3841),o=e(4650),k=e(6384);let B=(()=>{class t{constructor(){this.confirm=new o.vpe}onClick(){window.confirm(this.confirmText)&&this.confirm.emit()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=o.lG2({type:t,selectors:[["","bmConfirm",""]],hostBindings:function(n,s){1&n&&o.NdJ("click",function(){return s.onClick()})},inputs:{confirmText:["bmConfirm","confirmText"]},outputs:{confirm:"confirm"}}),t})();var _=e(7579),x=e(2722),Z=e(8338);let C=(()=>{class t{constructor(n,s,r){this.template=n,this.viewContainer=s,this.authService=r,this.destroy$=new _.x,this.authService.isAuthenticated$.pipe((0,x.R)(this.destroy$)).subscribe(f=>{f?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}ngOnDestroy(){this.destroy$.next()}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(o.Rgc),o.Y36(o.s_b),o.Y36(Z.e))},t.\u0275dir=o.lG2({type:t,selectors:[["","bmLoggedinOnly",""]]}),t})(),g=(()=>{class t{transform(n){return n?`${n.substring(0,3)}-${n.substring(3)}`:""}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=o.Yjl({name:"isbn",type:t,pure:!0}),t})();function T(t,i){if(1&t&&(o.TgZ(0,"p",9),o._uU(1),o.qZA()),2&t){const n=o.oxw(2);o.xp6(1),o.Oqu(n.book.subtitle)}}function L(t,i){if(1&t&&(o.TgZ(0,"li"),o._uU(1),o.qZA()),2&t){const n=i.$implicit;o.xp6(1),o.Oqu(n)}}function y(t,i){if(1&t&&(o.TgZ(0,"div")(1,"h2"),o._uU(2,"Published"),o.qZA(),o._uU(3),o.ALo(4,"date"),o.qZA()),2&t){const n=o.oxw(2);o.xp6(3),o.hij(" ",o.xi3(4,1,n.book.published,"longDate")," ")}}function A(t,i){if(1&t&&o._UZ(0,"img",10),2&t){const n=o.oxw(2);o.Q6J("src",n.book.thumbnailUrl,o.LSH)}}const I=function(t){return["/admin/edit",t]};function U(t,i){if(1&t){const n=o.EpF();o.ynx(0),o.TgZ(1,"button",11),o.NdJ("confirm",function(){o.CHM(n);const r=o.oxw(2);return o.KtG(r.removeBook())}),o._uU(2," Remove book "),o.qZA(),o.TgZ(3,"a",12),o._uU(4," Edit book "),o.qZA(),o.BQk()}if(2&t){const n=o.oxw(2);o.xp6(3),o.Q6J("routerLink",o.VKq(1,I,n.book.isbn))}}function F(t,i){if(1&t&&(o.TgZ(0,"div",1)(1,"h1"),o._uU(2),o.qZA(),o.YNc(3,T,2,1,"p",2),o.TgZ(4,"div",3)(5,"div")(6,"h2"),o._uU(7,"Authors"),o.qZA(),o.TgZ(8,"ul"),o.YNc(9,L,2,1,"li",4),o.qZA()(),o.TgZ(10,"div")(11,"h2"),o._uU(12,"ISBN"),o.qZA(),o._uU(13),o.ALo(14,"isbn"),o.qZA(),o.YNc(15,y,5,4,"div",5),o.qZA(),o.TgZ(16,"h2"),o._uU(17,"Description"),o.qZA(),o.TgZ(18,"p"),o._uU(19),o.qZA(),o.YNc(20,A,1,1,"img",6),o.TgZ(21,"a",7),o._uU(22,"Back to list"),o.qZA(),o.YNc(23,U,5,3,"ng-container",8),o.qZA()),2&t){const n=o.oxw();o.xp6(2),o.Oqu(n.book.title),o.xp6(1),o.Q6J("ngIf",n.book.subtitle),o.xp6(6),o.Q6J("ngForOf",n.book.authors),o.xp6(4),o.hij(" ",o.lcZ(14,7,n.book.isbn)," "),o.xp6(2),o.Q6J("ngIf",n.book.published),o.xp6(4),o.Oqu(n.book.description),o.xp6(1),o.Q6J("ngIf",n.book.thumbnailUrl)}}let Y=(()=>{class t{constructor(n,s,r){this.service=n,this.route=s,this.router=r;const f=this.route.snapshot.paramMap.get("isbn");this.service.getSingle(f).subscribe(oo=>{this.book=oo})}removeBook(){this.book&&this.service.remove(this.book.isbn).subscribe(()=>{this.router.navigateByUrl("/books")})}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(k.T),o.Y36(a.gz),o.Y36(a.F0))},t.\u0275cmp=o.Xpm({type:t,selectors:[["bm-book-details"]],decls:1,vars:1,consts:[["class","details",4,"ngIf"],[1,"details"],["role","doc-subtitle",4,"ngIf"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],["alt","Cover",3,"src",4,"ngIf"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["role","doc-subtitle"],["alt","Cover",3,"src"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(n,s){1&n&&o.YNc(0,F,24,9,"div",0),2&n&&o.Q6J("ngIf",s.book)},dependencies:[l.sg,l.O5,a.yS,B,C,l.uU,g]}),t})();var c=e(9653);const m=(0,c.PH)("[Book] Load Books"),d=(0,c.PH)("[Book] Load Books Success",(0,c.Ky)()),b=(0,c.PH)("[Book] Load Books Failure",(0,c.Ky)()),h="book",J=(0,c.Lq)({books:[],loading:!1},(0,c.on)(m,t=>({...t,loading:!0})),(0,c.on)(d,(t,i)=>({...t,books:i.data,loading:!1})),(0,c.on)(b,(t,i)=>({...t,loading:!1}))),v=(0,c.ZF)(h),O=(0,c.P1)(v,t=>t.loading),Q=(0,c.P1)(v,t=>t.books);function q(t,i){if(1&t&&o._UZ(0,"img",6),2&t){const n=o.oxw(2);o.Q6J("src",n.book.thumbnailUrl,o.LSH)}}function N(t,i){if(1&t&&(o.TgZ(0,"p",7),o._uU(1),o.qZA()),2&t){const n=o.oxw(2);o.xp6(1),o.hij(" ",n.book.subtitle," ")}}function w(t,i){if(1&t&&(o.TgZ(0,"li"),o._uU(1),o.qZA()),2&t){const n=i.$implicit;o.xp6(1),o.hij(" ",n," ")}}function S(t,i){if(1&t&&(o.TgZ(0,"a",1),o.YNc(1,q,1,1,"img",2),o.TgZ(2,"h2"),o._uU(3),o.qZA(),o.YNc(4,N,2,1,"p",3),o.TgZ(5,"ul",4),o.YNc(6,w,2,1,"li",5),o.qZA(),o.TgZ(7,"div"),o._uU(8),o.ALo(9,"isbn"),o.qZA()()),2&t){const n=o.oxw();o.Q6J("routerLink",n.book.isbn),o.xp6(1),o.Q6J("ngIf",n.book.thumbnailUrl),o.xp6(2),o.Oqu(n.book.title),o.xp6(1),o.Q6J("ngIf",n.book.subtitle),o.xp6(2),o.Q6J("ngForOf",n.book.authors),o.xp6(2),o.hij("ISBN ",o.lcZ(9,6,n.book.isbn),"")}}let $=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[[3,"routerLink",4,"ngIf"],[3,"routerLink"],["alt","Cover",3,"src",4,"ngIf"],["role","doc-subtitle",4,"ngIf"],[1,"comma-list"],[4,"ngFor","ngForOf"],["alt","Cover",3,"src"],["role","doc-subtitle"]],template:function(n,s){1&n&&o.YNc(0,S,10,8,"a",0),2&n&&o.Q6J("ngIf",s.book)},dependencies:[l.sg,l.O5,a.yS,g]}),t})();function M(t,i){if(1&t&&(o.TgZ(0,"li"),o._UZ(1,"bm-book-list-item",4),o.qZA()),2&t){const n=i.$implicit;o.xp6(1),o.Q6J("book",n)}}function j(t,i){1&t&&(o.TgZ(0,"li"),o._uU(1," No books available. "),o.qZA())}function H(t,i){if(1&t&&(o.TgZ(0,"ul",2),o.YNc(1,M,2,1,"li",3),o.YNc(2,j,2,0,"li",1),o.qZA()),2&t){const n=i.ngIf;o.xp6(1),o.Q6J("ngForOf",n),o.xp6(1),o.Q6J("ngIf",!n.length)}}function P(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Loading \u2026"),o.qZA())}const E=[{path:"",component:(()=>{class t{constructor(n){this.store=n,this.books$=this.store.select(Q),this.loading$=this.store.select(O),this.store.dispatch(m())}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(c.yh))},t.\u0275cmp=o.Xpm({type:t,selectors:[["bm-book-list"]],decls:6,vars:6,consts:[["class","book-list",4,"ngIf"],[4,"ngIf"],[1,"book-list"],[4,"ngFor","ngForOf"],[3,"book"]],template:function(n,s){1&n&&(o.TgZ(0,"h1"),o._uU(1,"Books"),o.qZA(),o.YNc(2,H,3,2,"ul",0),o.ALo(3,"async"),o.YNc(4,P,2,0,"div",1),o.ALo(5,"async")),2&n&&(o.xp6(2),o.Q6J("ngIf",o.lcZ(3,2,s.books$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(5,4,s.loading$)))},dependencies:[l.sg,l.O5,$,l.Ov]}),t})()},{path:":isbn",component:Y}];let R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[a.Bz.forChild(E),a.Bz]}),t})();var u=e(2655),G=e(3900),K=e(4004),z=e(262),X=e(9646);let V=(()=>{class t{constructor(n,s){this.actions$=n,this.service=s,this.loadBooks$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(m),(0,G.w)(()=>this.service.getAll().pipe((0,K.U)(r=>d({data:r})),(0,z.K)(r=>(0,X.of)(b({error:r.message})))))))}}return t.\u0275fac=function(n){return new(n||t)(o.LFG(u.eX),o.LFG(k.T))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})(),W=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[l.ez,R,c.Aw.forFeature(h,J),u.sQ.forFeature([V])]}),t})()}}]);